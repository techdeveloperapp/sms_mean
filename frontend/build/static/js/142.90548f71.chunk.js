(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[142],{1395:function(e,c,t){"use strict";t.r(c);var s=t(0),l=t(27),a=t(84),n=t(26),d=t(59),i=t(932),o=t.n(i),r=t(683),j=t.n(r),m=t(817),b=t(10);c.default=function(){const[e,c]=Object(s.useState)(""),[t,i]=Object(s.useState)(""),[r,h]=Object(s.useState)(""),[u,v]=Object(s.useState)(""),[O,x]=Object(s.useState)(""),[f,p]=Object(s.useState)(!1),[N,g]=Object(s.useState)([]),_=Object(a.c)(n.c),C=Object(a.c)(n.m),y=Object(a.c)(d.d),E=Object(a.c)(n.k),S=Object(a.c)(n.g),w=Object(a.c)(n.f),P=Object(a.c)(n.b);console.log(N),Object(s.useEffect)((()=>{l.a.get("/fees").then((e=>{g(e.data)}))}),[]);const V=()=>{if((null===e||void 0===e?void 0:e.length)<=0)return 0;return(null===e||void 0===e?void 0:e.map((e=>{let c=N.find((c=>c.code===(null===e||void 0===e?void 0:e.fees)));return{val:c?Object.values(c[e.status]).reduce(((e,c)=>Number(e)+Number(c)),0):0}}))).reduce(((e,c)=>Number(e)+Number(c.val)),0)};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{className:"",children:"Expected Revenue Reports"}),Object(b.jsxs)("form",{className:"content__container row",children:[Object(b.jsxs)("div",{className:"col-sm-6 col-md-4 mb-3",children:[Object(b.jsx)("label",{htmlFor:"name",className:" col-form-label",children:"Academic Year"}),Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("select",{name:"academic-calendar",className:"form-select",value:t,onChange:e=>i(e.target.value),children:[Object(b.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),C&&C.map((e=>Object(b.jsx)("option",{value:e.year,children:null===e||void 0===e?void 0:e.year},e._id)))]})})]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-sm-6 col-md-4 mb-3",children:[Object(b.jsx)("label",{htmlFor:"name",className:" col-form-label",children:"Search By"}),Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("select",{name:"academic-calendar",className:"form-select",value:r,onChange:e=>h(e.target.value),children:[Object(b.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),Object(b.jsx)("option",{value:"classID",children:"Class"}),Object(b.jsx)("option",{value:"section",children:"section"}),Object(b.jsx)("option",{value:"campus",children:"campus"}),Object(b.jsx)("option",{value:"dormitory",children:"dormitory"}),Object(b.jsx)("option",{value:"division",children:"division"})]})})]}),"division"===r&&Object(b.jsxs)("div",{className:"col-sm-6 col-md-4 mb-3",children:[Object(b.jsx)("label",{htmlFor:"name",className:" col-form-label",children:"Division"}),Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("select",{name:"academic-calendar",className:"form-select",value:u,onChange:e=>v(e.target.value),children:[Object(b.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),w&&w.map((e=>Object(b.jsx)("option",{value:e.classCode,children:null===e||void 0===e?void 0:e.classCode},e._id)))]})})]}),"dormitory"===r&&Object(b.jsxs)("div",{className:"col-sm-6 col-md-4 mb-3",children:[Object(b.jsx)("label",{htmlFor:"name",className:" col-form-label",children:"Dormitory"}),Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("select",{name:"academic-calendar",className:"form-select",value:u,onChange:e=>v(e.target.value),children:[Object(b.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),S&&S.map((e=>Object(b.jsx)("option",{value:e._id,children:null===e||void 0===e?void 0:e.name},e._id)))]})})]}),"campus"===r&&Object(b.jsxs)("div",{className:"col-sm-6 col-md-4 mb-3",children:[Object(b.jsx)("label",{htmlFor:"name",className:" col-form-label",children:"Campus"}),Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("select",{name:"academic-calendar",className:"form-select",value:u,onChange:e=>v(e.target.value),children:[Object(b.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),P&&P.map((e=>Object(b.jsx)("option",{value:e._id,children:null===e||void 0===e?void 0:e.name},e._id)))]})})]}),"section"===r&&Object(b.jsxs)("div",{className:"col-sm-6 col-md-4 mb-3",children:[Object(b.jsx)("label",{htmlFor:"name",className:" col-form-label",children:"Section"}),Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("select",{name:"academic-calendar",className:"form-select",value:u,onChange:e=>v(e.target.value),children:[Object(b.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),E&&E.map((e=>Object(b.jsx)("option",{value:e._id,children:null===e||void 0===e?void 0:e.name},e._id)))]})})]}),"classID"===r&&Object(b.jsxs)("div",{className:"col-sm-6 col-md-4 mb-3",children:[Object(b.jsx)("label",{htmlFor:"name",className:" col-form-label",children:"Class"}),Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("select",{name:"academic-calendar",className:"form-select",value:u,onChange:e=>v(e.target.value),children:[Object(b.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),_&&_.map((e=>Object(b.jsx)("option",{value:e.classCode,children:null===e||void 0===e?void 0:e.classCode},e._id)))]})})]})]}),Object(b.jsx)("div",{className:"mb-3",children:Object(b.jsxs)("button",{onClick:()=>{r&&u&&(p(!0),l.a.get("/students/number/".concat(r,"/").concat(u)).then((e=>{p(!1),"classID"===r?x(u):"section"===r?x(E.find((e=>e._id===u)).name):"dormitory"===r?x(S.find((e=>e._id===u)).name):"campus"===r?x(P.find((e=>e._id===u)).name):"division"===r&&x(w.find((e=>e._id===u)).name),console.log(e),c(e.data.docs)})).catch((e=>{console.log(e),p(!1)})))},disabled:f||!u||!r,type:"submit",className:"btn blue__btn",children:[f&&Object(b.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Search"]})})]}),O&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"mt-5 content__container",children:[Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsx)("h5",{children:Object(b.jsx)("strong",{children:null===y||void 0===y?void 0:y.name})}),Object(b.jsx)("h5",{children:"EXPECTED REVENUE REPORT"}),Object(b.jsxs)("div",{children:[r," - ",O]})]}),Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Term/ Semester"}),Object(b.jsx)("th",{scope:"col",children:"Expected Revenue ($)"})]})}),Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"1st"}),Object(b.jsx)("td",{children:V()})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"2nd"}),Object(b.jsx)("td",{children:V()})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"3rd"}),Object(b.jsx)("td",{children:V()})]})]})]})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-center mt-3",children:[Object(b.jsxs)("button",{onClick:()=>{window.print()},className:"btn blue__btn",children:["Print ",Object(b.jsx)(j.a,{})]}),Object(b.jsxs)("button",{onClick:()=>{Object(m.a)({data:[{term:"1st",value:V()},{term:"2nd",value:V()},{term:"3rd",value:V()}],headers:[{key:"term",label:"Term / Semester"},{key:"value",label:"Expected Revenue ($)"}],filename:"Expected Revenue",title:null===y||void 0===y?void 0:y.name,subheading:" ".concat(r," - ").concat(O)})},className:"btn blue__btn ml-3",children:["Save ",Object(b.jsx)(o.a,{})]})]})]})]})}},683:function(e,c,t){"use strict";var s=t(609),l=t(611);Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=l(t(0)),n=(0,s(t(610)).default)(a.createElement("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"Print");c.default=n},817:function(e,c,t){"use strict";t.d(c,"a",(function(){return l}));var s=t(980);const l=function(e){let{data:c,headers:t,filename:l,title:a,subheading:n,date:d}=e;const i=new s.a({orientation:"l",unit:"pt",format:"a4"}),o=50,r={width:841.89-o,height:595.28-o};i.setFontSize(8),a&&i.text(a,200,29),n&&i.text(n,200,30),d&&i.text(d,200,32);const j=[];t.forEach(((e,c)=>{if(e.hasOwnProperty("xPos"))i.text(e.label,e.xPos,o),j.push(e.xPos);else{const s=o+c*(r.width/t.length),l=o;i.text(e.label,0===c?s:s+15,l),j.push(0===c?s:s+15)}})),i.line(o,53.5,r.width,53.5);let m=65;c.forEach(((e,c)=>{const s=[];t.forEach(((c,t)=>{const l=i.splitTextToSize(String(e[c.key]),j[t]-j[0!==t&&t-1]),a=l.length*i.getLineHeight();s.push(a),i.text(l,j[t],m)})),m=m+15+Math.max(...s,30),m>r.height&&(i.addPage(),m=65)})),i.save(l)}},932:function(e,c,t){"use strict";var s=t(609),l=t(611);Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var a=l(t(0)),n=(0,s(t(610)).default)(a.createElement("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}),"InsertDriveFile");c.default=n}}]);
//# sourceMappingURL=142.90548f71.chunk.js.map