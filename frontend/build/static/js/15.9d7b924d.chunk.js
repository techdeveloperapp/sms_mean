(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[15],{1479:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t(27),l=t(123),o=t(646),c=t(614),s=t(84),r=t(59),d=t(617),b=t.n(d),p=t(97),j=t(711),u=t(783),h=t(791),m=t(810),v=t(1338),x=t(636),O=t.n(x),g=t(1285),f=t(10);const y=Object(p.a)((e=>({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})))((e=>{const{children:a,classes:t,onClose:n,...i}=e;return Object(f.jsxs)(u.a,{disableTypography:!0,className:t.root,...i,children:[Object(f.jsx)(g.a,{variant:"h6",children:a}),n?Object(f.jsx)(v.a,{"aria-label":"close",className:t.closeButton,onClick:n,children:Object(f.jsx)(O.a,{})}):null]})})),k=Object(p.a)((e=>({root:{padding:e.spacing(2)}})))(h.a);Object(p.a)((e=>({root:{margin:0,padding:e.spacing(1)}})))(m.a);function w(e){let{open:a,setOpen:t,handleEdit:n,loading:i,paymentPlan:l,setpackage:o}=e;const c=()=>{t(!1)};return Object(f.jsxs)(j.a,{maxWidth:"sm",fullWidth:!0,onClose:c,"aria-labelledby":"customized-dialog-title",open:a,children:[Object(f.jsx)(y,{id:"customized-dialog-title",onClose:c,children:"Modal title"}),Object(f.jsx)(k,{dividers:!0,children:Object(f.jsxs)("form",{action:"",children:[Object(f.jsxs)("div",{className:" mb-3",children:[Object(f.jsxs)("label",{className:"form-label",children:["Select Payment Plan ","  "]}),Object(f.jsxs)("select",{onChange:e=>o(e.target.value),name:"class",className:"form-select",children:[Object(f.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),(null===l||void 0===l?void 0:l.length)>0?null===l||void 0===l?void 0:l.map((e=>Object(f.jsx)("option",{value:e.plan,children:e.name},e._id))):Object(f.jsx)("option",{disabled:!0,children:"no data yet"})]})]}),Object(f.jsxs)("button",{onClick:n,disabled:i,className:"blue__btn btn",to:"/canteen/join",children:[i&&Object(f.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Join"]})]})})]})}var N=t(126);const C=[{id:"date",name:"Date"},{id:"amount",name:"Amount ($)"}];a.default=function(){const[e,a]=Object(n.useState)([]),[t,d]=Object(n.useState)(null),p=Object(s.c)(r.d),[j,u]=Object(n.useState)(""),[h,m]=Object(n.useState)(!1),[v,x]=Object(n.useState)(""),[O,g]=Object(n.useState)([]),[y,k]=Object(n.useState)(!1);Object(n.useEffect)((()=>{i.a.get("/paymentplan").then((e=>{var a;g(null===(a=e.data)||void 0===a?void 0:a.plans)}))}),[]),Object(n.useEffect)((()=>{i.a.get("/canteen/user/".concat(null===p||void 0===p?void 0:p.userID)).then((async e=>{e.data.success?(d(e.data.user),a(e.data.user.payments),x(e.data.user.paymentMethod)):(await i.a.get("/students/student/".concat(null===p||void 0===p?void 0:p.userID)).then((e=>{var a;u(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.student)})),d(null))})).catch((e=>{console.log(e)}))}),[p]);let E=null===O||void 0===O?void 0:O.find((e=>e.plan===(null===t||void 0===t?void 0:t.paymentMethod)));return Object(f.jsxs)("div",{children:[h&&Object(f.jsx)(N.a,{}),t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"d-flex justify-content-end mb-2",children:[Object(f.jsx)(l.b,{className:"btn orange__btn",to:"/finance/canteen/pricing",children:"View Canteen Pricing"}),Object(f.jsx)("button",{onClick:()=>k(!0),className:"btn orange__btn ml-2",children:"Change Membership Plan"})]}),Object(f.jsx)("div",{className:"blue_bg p-3 mb-4",children:Object(f.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("h4",{children:["Membership ID"," ",Object(f.jsx)("span",{className:"orange_color",children:null===t||void 0===t?void 0:t.memberID})," "]}),Object(f.jsxs)("h6",{children:["Join at ",b()().format("D MMMM YYYY")]}),Object(f.jsxs)("h6",{children:["Payment Plan"," ",Object(f.jsx)("span",{className:"orange_color",children:null===E||void 0===E?void 0:E.name})," "]})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{className:"btn btn-danger",onClick:()=>{i.a.delete("/canteen/delete/".concat(null===t||void 0===t?void 0:t.memberID)).then((e=>{var a,t;if(null!==(a=e.data)&&void 0!==a&&a.error)return Object(c.c)(null===(t=e.data)||void 0===t?void 0:t.error),0;d(null)}))},children:"Sign out your membership"})})]})}),Object(f.jsx)(o.a,{noActions:!0,data:e,tableHeader:C})]}):Object(f.jsxs)("div",{className:"content__container  mt-5",children:[Object(f.jsx)("h3",{className:"mb-3",children:"You are not a canteen member yet"}),Object(f.jsx)("div",{children:Object(f.jsx)("a",{href:"/finance/canteen/pricing",children:"View Payment Plans available"})}),Object(f.jsxs)("div",{className:" mb-3",children:[Object(f.jsxs)("label",{className:"form-label",children:["Select Payment Plan ","  "]}),Object(f.jsxs)("select",{onChange:e=>x(e.target.value),name:"class",className:"form-select",children:[Object(f.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),(null===O||void 0===O?void 0:O.length)>0?null===O||void 0===O?void 0:O.map((e=>Object(f.jsx)("option",{value:e.plan,children:e.name},e._id))):Object(f.jsx)("option",{disabled:!0,children:"no data yet"})]})]}),Object(f.jsxs)("button",{onClick:()=>{m(!0),i.a.post("/canteen/create",{name:(null===p||void 0===p?void 0:p.name)+" "+(null===p||void 0===p?void 0:p.lastName),userID:null===p||void 0===p?void 0:p.id,role:null===p||void 0===p?void 0:p.role,classID:j,paymentMethod:v}).then((e=>{var a,t,n;if(m(!1),null!==(a=e.data)&&void 0!==a&&a.error)return Object(c.c)(e.data.error),0;d(null===(t=e.data)||void 0===t?void 0:t.user),Object(c.m)("member with id ".concat(null===(n=e.data.user)||void 0===n?void 0:n.memberID)),x("")})).catch((e=>{m(!1),console.log(e),Object(c.c)("Something when wrong")}))},disabled:h,className:"blue__btn btn",to:"/canteen/join",children:[h&&Object(f.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Join"]})]}),Object(f.jsx)(w,{open:y,handleEdit:()=>{m(!0),i.a.put("/canteen/update/".concat(null===t||void 0===t?void 0:t.memberID),{paymentMethod:v}).then((e=>{if(m(!1),e.data.error)return Object(c.c)(e.data.error),0;Object(c.m)("Changes saved"),d(e.data.doc),k(!1),x(e.data.doc.paymentMethod)}))},loading:h,paymentPlan:O,setpackage:x,setOpen:k})]})}},623:function(e,a,t){"use strict";var n=t(609),i=t(611);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=i(t(0)),o=(0,n(t(610)).default)(l.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");a.default=o},629:function(e,a,t){"use strict";t(0);var n=t(457),i=t(160),l=t(1338),o=t(626),c=t.n(o),s=t(628),r=t.n(s),d=t(627),b=t.n(d),p=t(625),j=t.n(p),u=t(10);const h=Object(n.a)((e=>({root:{flexShrink:0,marginLeft:e.spacing(2.5)}})));a.a=function(e){const a=h(),t=Object(i.a)(),{count:n,page:o,rowsPerPage:s,onChangePage:d}=e;return Object(u.jsxs)("div",{className:a.root,children:[Object(u.jsx)(l.a,{onClick:e=>{d(e,0)},disabled:0===o,"aria-label":"first page",children:"rtl"===t.direction?Object(u.jsx)(j.a,{}):Object(u.jsx)(c.a,{})}),Object(u.jsx)(l.a,{onClick:e=>{d(e,o-1)},disabled:0===o,"aria-label":"previous page",children:"rtl"===t.direction?Object(u.jsx)(b.a,{}):Object(u.jsx)(r.a,{})}),Object(u.jsx)(l.a,{onClick:e=>{d(e,o+1)},disabled:o>=Math.ceil(n/s)-1,"aria-label":"next page",children:"rtl"===t.direction?Object(u.jsx)(r.a,{}):Object(u.jsx)(b.a,{})}),Object(u.jsx)(l.a,{onClick:e=>{d(e,Math.max(0,Math.ceil(n/s)-1))},disabled:o>=Math.ceil(n/s)-1,"aria-label":"last page",children:"rtl"===t.direction?Object(u.jsx)(c.a,{}):Object(u.jsx)(j.a,{})})]})}},632:function(e,a,t){"use strict";var n=t(609),i=t(611);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=i(t(0)),o=(0,n(t(610)).default)(l.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");a.default=o},636:function(e,a,t){"use strict";var n=t(609),i=t(611);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=i(t(0)),o=(0,n(t(610)).default)(l.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");a.default=o},639:function(e,a,t){"use strict";var n=t(609),i=t(611);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=i(t(0)),o=(0,n(t(610)).default)(l.createElement("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}),"Toc");a.default=o},646:function(e,a,t){"use strict";t.d(a,"a",(function(){return M}));var n=t(0),i=t.n(n),l=t(457),o=t(941),c=t(942),s=t(937),r=t(939),d=t(940),b=t(686),p=t(1446),j=t(938),u=t(927),h=t(1338),m=t(623),v=t.n(m),x=t(632),O=t.n(x),g=t(629),f=t(617),y=t.n(f),k=t(792),w=t(639),N=t.n(w),C=t(10);const E=Object(l.a)({table:{width:"100%"}});function M(e){var a;let{data:t,tableHeader:n,handleEdit:l,handleDelete:m,loading:x,isCanteen:f,isEdit:w,isItems:M,noActions:P,noData:S}=e;const D=E(),[W,_]=i.a.useState(0),[B,I]=i.a.useState(5),z=B-Math.min(B,(null===t||void 0===t?void 0:t.length)-W*B);return Object(C.jsx)(d.a,{component:u.a,children:Object(C.jsxs)(o.a,{className:D.table,"aria-label":"custom pagination table",children:[Object(C.jsx)(s.a,{children:Object(C.jsxs)(j.a,{children:[n&&(null===n||void 0===n?void 0:n.map((e=>Object(C.jsx)(r.a,{children:e.name},e.id)))),!P&&Object(C.jsx)(r.a,{children:"Actions"})]})}),x?Object(C.jsx)(c.a,{className:"text-center my-5 w-100",children:Object(C.jsx)(j.a,{children:Object(C.jsx)(r.a,{colSpan:n.lenght,children:Object(C.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status"})})})}):Object(C.jsxs)(c.a,{children:[(null===t||void 0===t?void 0:t.length)<=0?Object(C.jsx)(j.a,{children:Object(C.jsx)(r.a,{colSpan:n.length+1,className:"text-center text-danger",children:S||"No data"})}):Object(C.jsx)(C.Fragment,{children:null===(a=B>0?null===t||void 0===t?void 0:t.slice(W*B,W*B+B):t)||void 0===a?void 0:a.map((e=>Object(C.jsxs)(j.a,{children:[n&&(null===n||void 0===n?void 0:n.map((a=>{var t,n;return Object(C.jsx)(r.a,{align:"left",children:(n=e[null===a||void 0===a?void 0:a.id],new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(n)?null===(t=y()(e[null===a||void 0===a?void 0:a.id]))||void 0===t?void 0:t.format("D MMMM YYYY"):e[null===a||void 0===a?void 0:a.id]||"-")},null===a||void 0===a?void 0:a.id)}))),!P&&Object(C.jsx)(r.a,{align:"left",children:Object(C.jsxs)("div",{className:"d-flex align-items-center",children:[Object(C.jsx)(k.a,{title:M?"Manage Inventory":"delete",children:Object(C.jsx)(h.a,{onClick:()=>m(f?e.memberID:e._id),children:M?Object(C.jsx)(N.a,{}):Object(C.jsx)(O.a,{})})}),!w&&Object(C.jsx)(k.a,{title:"edit",children:Object(C.jsx)(h.a,{onClick:()=>l(f?e.memberID:e._id),children:Object(C.jsx)(v.a,{})})})]})})]},e._id)))}),z>0&&Object(C.jsx)(j.a,{style:{height:53},children:Object(C.jsx)(r.a,{colSpan:6})})]}),Object(C.jsx)(b.a,{children:Object(C.jsx)(j.a,{children:(null===t||void 0===t?void 0:t.length)>5&&Object(C.jsx)(p.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],count:null===t||void 0===t?void 0:t.length,rowsPerPage:B,page:W,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:(e,a)=>{_(a)},onChangeRowsPerPage:e=>{I(parseInt(e.target.value,10)),_(0)},ActionsComponent:g.a})})})]})})}},711:function(e,a,t){"use strict";var n=t(1),i=t(14),l=t(68),o=t(0),c=t(30),s=t(97),r=t(158),d=t(1455),b=t(459),p=t(460),j=t(86),u=t(927),h={enter:j.b.enteringScreen,exit:j.b.leavingScreen},m=o.forwardRef((function(e,a){var t=e.BackdropProps,l=e.children,s=e.classes,j=e.className,m=e.disableBackdropClick,v=void 0!==m&&m,x=e.disableEscapeKeyDown,O=void 0!==x&&x,g=e.fullScreen,f=void 0!==g&&g,y=e.fullWidth,k=void 0!==y&&y,w=e.maxWidth,N=void 0===w?"sm":w,C=e.onBackdropClick,E=e.onClose,M=e.onEnter,P=e.onEntered,S=e.onEntering,D=e.onEscapeKeyDown,W=e.onExit,_=e.onExited,B=e.onExiting,I=e.open,z=e.PaperComponent,T=void 0===z?u.a:z,Y=e.PaperProps,A=void 0===Y?{}:Y,H=e.scroll,V=void 0===H?"paper":H,R=e.TransitionComponent,$=void 0===R?p.a:R,F=e.transitionDuration,K=void 0===F?h:F,L=e.TransitionProps,J=e["aria-describedby"],X=e["aria-labelledby"],U=Object(i.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),Z=o.useRef();return o.createElement(d.a,Object(n.a)({className:Object(c.a)(s.root,j),BackdropComponent:b.a,BackdropProps:Object(n.a)({transitionDuration:K},t),closeAfterTransition:!0},v?{disableBackdropClick:v}:{},{disableEscapeKeyDown:O,onEscapeKeyDown:D,onClose:E,open:I,ref:a},U),o.createElement($,Object(n.a)({appear:!0,in:I,timeout:K,onEnter:M,onEntering:S,onEntered:P,onExit:W,onExiting:B,onExited:_,role:"none presentation"},L),o.createElement("div",{className:Object(c.a)(s.container,s["scroll".concat(Object(r.a)(V))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===Z.current&&(Z.current=null,C&&C(e),!v&&E&&E(e,"backdropClick"))},onMouseDown:function(e){Z.current=e.target}},o.createElement(T,Object(n.a)({elevation:24,role:"dialog","aria-describedby":J,"aria-labelledby":X},A,{className:Object(c.a)(s.paper,s["paperScroll".concat(Object(r.a)(V))],s["paperWidth".concat(Object(r.a)(String(N)))],A.className,f&&s.paperFullScreen,k&&s.paperFullWidth)}),l))))}));a.a=Object(s.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(l.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(l.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(l.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(l.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(l.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(m)},783:function(e,a,t){"use strict";var n=t(1),i=t(14),l=t(0),o=t(30),c=t(97),s=t(1285),r=l.forwardRef((function(e,a){var t=e.children,c=e.classes,r=e.className,d=e.disableTypography,b=void 0!==d&&d,p=Object(i.a)(e,["children","classes","className","disableTypography"]);return l.createElement("div",Object(n.a)({className:Object(o.a)(c.root,r),ref:a},p),b?t:l.createElement(s.a,{component:"h2",variant:"h6"},t))}));a.a=Object(c.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(r)},791:function(e,a,t){"use strict";var n=t(1),i=t(14),l=t(0),o=t(30),c=t(97),s=l.forwardRef((function(e,a){var t=e.classes,c=e.className,s=e.dividers,r=void 0!==s&&s,d=Object(i.a)(e,["classes","className","dividers"]);return l.createElement("div",Object(n.a)({className:Object(o.a)(t.root,c,r&&t.dividers),ref:a},d))}));a.a=Object(c.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(s)},810:function(e,a,t){"use strict";var n=t(1),i=t(14),l=t(0),o=t(30),c=t(97),s=l.forwardRef((function(e,a){var t=e.disableSpacing,c=void 0!==t&&t,s=e.classes,r=e.className,d=Object(i.a)(e,["disableSpacing","classes","className"]);return l.createElement("div",Object(n.a)({className:Object(o.a)(s.root,r,!c&&s.spacing),ref:a},d))}));a.a=Object(c.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(s)}}]);
//# sourceMappingURL=15.9d7b924d.chunk.js.map