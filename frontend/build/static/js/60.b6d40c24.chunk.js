(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[60],{1048:function(e,s,t){"use strict";var c=t(0),a=t(638),l=t(27),o=t(10);s.a=function(e){const{register:s,handleSubmit:t,errors:n}=Object(a.a)(),[i,r]=Object(c.useState)([]),[d,j]=Object(c.useState)([]);Object(c.useEffect)((()=>{l.a.get("/classes").then((e=>{console.log(e.data),r(e.data)}))}),[]),Object(c.useEffect)((()=>{l.a.get("/courses").then((e=>{j(e.data)}))}),[]);let{classID:b,setclass:h,subject:m,setsubject:u,topic:O,settopic:p,loading:f,handleAdd:x,handleReset:g,isEdit:v,role:N,setfile:C,notes:S,setnotes:w}=e;return Object(o.jsxs)("form",{className:"row g-3",action:"",children:["admin"===N&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{className:"form-label",children:"Select Class"}),Object(o.jsxs)("select",{value:b,onChange:e=>h(e.target.value),name:"class",className:"form-select",children:[Object(o.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),i.length>0?i.map((e=>Object(o.jsx)("option",{value:e.classCode,children:e.name},e.classCode))):Object(o.jsx)("option",{disabled:!0,children:"No classes available yet"})]})]}),Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{className:"form-label",children:"Select Subject"}),Object(o.jsxs)("select",{value:m,onChange:e=>u(e.target.value),name:"class",className:"form-select",children:[Object(o.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),d.length>0?d.map((e=>Object(o.jsx)("option",{value:e.code,children:e.name},e.code))):Object(o.jsx)("option",{disabled:!0,children:"No courses available yet"})]})]})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Topic"}),Object(o.jsx)("input",{value:O,ref:s({required:!0}),onChange:e=>p(e.target.value),type:"text",className:"form-control",name:"topic"}),n.topic&&Object(o.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Notes"}),Object(o.jsx)("textarea",{value:S,onChange:e=>w(e.target.value),rows:5,className:"form-control",id:"topic"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Upload file"}),Object(o.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.doc,.docx,.pdf, .zip",ref:s({required:!0}),onChange:e=>C(e),className:"form-control",name:"file"}),n.file&&Object(o.jsx)("span",{className:" form-error text-danger mb-2",children:"Please select file"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsxs)("button",{onClick:t(x),className:"btn blue__btn mr-3",children:[f&&Object(o.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),v?"Save Changes":"Add"]}),Object(o.jsx)("button",{onClick:t(g),className:"btn orange__btn",children:"Reset"})]})]})}},1369:function(e,s,t){"use strict";t.r(s);var c=t(0),a=t(1048),l=t(27),o=t(614),n=t(84),i=t(59),r=t(16),d=t(10);s.default=function(){const[e,s]=Object(c.useState)(""),[t,j]=Object(c.useState)(""),[b,h]=Object(c.useState)(""),m=Object(n.c)(i.d),[u,O]=Object(c.useState)(!1),{id:p,classID:f}=Object(r.i)(),x=()=>{s(""),j(""),h("")};return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"content__container mb-5",children:[Object(d.jsx)("h3",{children:"Add New Notes"}),Object(d.jsx)(a.a,{topic:e,settopic:s,file:b,loading:u,handleReset:x,setfile:e=>{const s=e.target.files[0];if((null===s||void 0===s?void 0:s.size)>2e6)return Object(o.c)("image is too large");h(s)},role:null===m||void 0===m?void 0:m.role,handleAdd:async()=>{let s=" ";if(!b)return Object(o.c)("Please select file");O(!0);const c=new FormData;c.append("photo",b);let a=await l.a.post("/upload",c,{});if(a.error)return Object(o.c)("The file is too big");s=null===a||void 0===a?void 0:a.path,await l.a.post("/notes/create",{topic:e,courseID:p,classID:f,notes:t,file:s,senderID:null===m||void 0===m?void 0:m.id}).then((e=>{if(e.data.error)return Object(o.c)(e.data.error),O(!1),0;Object(o.m)("notes successfully added"),O(!1),x()})).catch((e=>{console.log(e),O(!1),Object(o.c)("File is too big")}))},notes:t,setnotes:j})]})})}}}]);
//# sourceMappingURL=60.b6d40c24.chunk.js.map