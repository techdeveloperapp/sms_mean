{"version":3,"sources":["AdminComponents/attendance/StudentAttendance/StudentsAttendanceHistory.js"],"names":["Attendance","classID","setclassID","useState","date","setDate","attendanceData","setattendanceData","storeData","setstoreData","classes","useSelector","selectClasses","useEffect","axios","get","then","res","console","log","data","inputFields","type","label","value","options","map","e","id","classCode","name","onChange","_jsxs","children","_jsx","Search","handleSearch","preventDefault","newClasses","filter","i","_i$classID","toLowerCase","includes","_i$date","Date","toISOString","handleReset","title","className","Link","to","Table"],"mappings":"iIAAA,8EA2FeA,UAnFf,WACE,MAAOC,EAASC,GAAcC,mBAAS,KAChCC,EAAMC,GAAWF,mBAAS,KAC1BG,EAAgBC,GAAqBJ,mBAAS,KAC9CK,EAAWC,GAAgBN,mBAAS,IACrCO,EAAUC,YAAYC,KA0B5BC,qBAAU,KACRC,IAAMC,IAAI,wBAAwBC,MAAMC,IACtCC,QAAQC,IAAIF,EAAIG,MAChBb,EAAkBU,EAAIG,MACtBX,EAAaQ,EAAIG,KAAK,GACtB,GACD,IAEH,MAAMC,EAAc,CAClB,CACEC,KAAM,SACNC,MAAO,kBACPC,MAAOvB,EACPwB,QAASf,EAAQgB,KAAKC,IACb,CACLC,GAAID,EAAEE,UACNC,KAAMH,EAAEG,SAGZA,KAAM,YACNC,SAAU7B,IAWd,OACE8B,eAAA,OAAAC,SAAA,CACEC,cAACC,IAAM,CACLC,aA1DgBT,IACpBA,EAAEU,iBACF,IAAIC,EAAa,GACbrC,IACFqC,EAAa9B,EAAU+B,QAAQC,IAAC,IAAAC,EAAA,OAC7B,OAADD,QAAC,IAADA,GAAU,QAATC,EAADD,EAAGvC,eAAO,IAAAwC,OAAT,EAADA,EAAYC,cAAcC,SAAgB,OAAP1C,QAAO,IAAPA,OAAO,EAAPA,EAASyC,cAAc,KAG1DtC,IAEFkC,EAAaA,EAAWC,QAAQC,IAAC,IAAAI,EAAA,OAC9B,OAADJ,QAAC,IAADA,GAAO,QAANI,EAADJ,EAAGpC,YAAI,IAAAwC,OAAN,EAADA,EAASD,SAAS,IAAIE,KAAKzC,GAAM0C,cAAc,KAGnDvC,EAAkB+B,EAAW,EA6CzBS,YA1CepB,IACnBA,EAAEU,iBACFnC,EAAW,IACXG,EAAQ,IACRE,EAAkBC,EAAU,EAuCxBwC,MAAM,uBACN3B,YAAaA,IAEfW,eAAA,OAAKiB,UAAU,qBAAoBhB,SAAA,CACjCD,eAAA,OAAKiB,UAAU,sCAAqChB,SAAA,CAClDC,cAAA,MAAAD,SAAI,sBACJC,cAACgB,IAAI,CAACC,GAAG,gCAAgCF,UAAU,gBAAehB,SAAC,2BAIrEC,cAACkB,IAAK,CAAC9C,eAAgBA,SAI/B,C","file":"static/js/181.3b1cfec8.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Search from \"../../shared/Search\";\nimport Table from \"../../shared/AttendanceTable\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"../../../store/axios\";\nimport { useSelector } from \"react-redux\";\nimport { selectClasses } from \"../../../store/slices/schoolSlice\";\n\nfunction Attendance() {\n  const [classID, setclassID] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [attendanceData, setattendanceData] = useState([]);\n  const [storeData, setstoreData] = useState([]);\n  const classes = useSelector(selectClasses);\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    let newClasses = [];\n    if (classID) {\n      newClasses = storeData.filter((i) =>\n        i?.classID?.toLowerCase().includes(classID?.toLowerCase())\n      );\n    }\n    if (date) {\n      //let today = new Date()\n      newClasses = newClasses.filter((i) =>\n        i?.date?.includes(new Date(date).toISOString())\n      );\n    }\n    setattendanceData(newClasses);\n  };\n\n  const handleReset = (e) => {\n    e.preventDefault();\n    setclassID(\"\");\n    setDate(\"\");\n    setattendanceData(storeData);\n  };\n\n  useEffect(() => {\n    axios.get(\"/attendance/students\").then((res) => {\n      console.log(res.data);\n      setattendanceData(res.data);\n      setstoreData(res.data);\n    });\n  }, []);\n\n  const inputFields = [\n    {\n      type: \"select\",\n      label: \"Search by Class\",\n      value: classID,\n      options: classes.map((e) => {\n        return {\n          id: e.classCode,\n          name: e.name,\n        };\n      }),\n      name: \"studentID\",\n      onChange: setclassID,\n    },\n    // {\n    //   type: \"date\",\n    //   label: \"Search by Date\",\n    //   value: date,\n    //   name: \"date\",\n    //   onChange: setDate,\n    // },\n  ];\n\n  return (\n    <div>\n      <Search\n        handleSearch={handleSearch}\n        handleReset={handleReset}\n        title=\"Student's Attendance\"\n        inputFields={inputFields}\n      />\n      <div className=\"content__container\">\n        <div className=\"d-flex justify-content-between mb-3\">\n          <h3>Attendance Record</h3>\n          <Link to=\"/attendance/students/register\" className=\"btn blue__btn\">\n            Register Attendance\n          </Link>\n        </div>\n        <Table attendanceData={attendanceData} />\n      </div>\n    </div>\n  );\n}\n\nexport default Attendance;\n"],"sourceRoot":""}