(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[171],{1461:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(933),l=a(10);var i=function(e){let{openEdit:t,setopenEdit:a,notices:c,searchDate:i,handleSearch:n,handleReset:d,setsearchDate:r,searchTitle:o,setsearchTitle:j,editData:b,handleDelete:h}=e;return Object(l.jsxs)("div",{className:"content__container",children:[Object(l.jsx)("h3",{children:"Notice Board"}),Object(l.jsxs)("form",{action:"",className:"row",children:[Object(l.jsx)("div",{className:"col-sm-4 mb-3",children:Object(l.jsx)("input",{type:"text",value:i,onChange:e=>r(e.target.value),placeholder:"Search by Date",className:"form-control"})}),Object(l.jsx)("div",{className:"col-sm-4 mb-3",children:Object(l.jsx)("input",{type:"text",value:o,onChange:e=>j(e.target.value),placeholder:"Search by Title",className:"form-control"})}),Object(l.jsxs)("div",{className:"col-sm-3 d-flex justify-content-between",children:[Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:n,className:"btn blue__btn",children:"Search"})}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:d,className:"btn orange__btn",children:"Reset"})})]})]}),Object(l.jsx)("div",{className:"notice__container my-5",children:(null===c||void 0===c?void 0:c.length)>0?null===c||void 0===c?void 0:c.map((e=>Object(l.jsxs)("div",{className:"py-3",children:[Object(l.jsx)(s.a,{description:e.description,open:t,isEdit:!0,setOpen:a,date:e.date,id:e._id,createdAt:e.createdAt,title:e.title,createdBy:e.createdBy,editData:b,handleDelete:h}),Object(l.jsx)("hr",{})]},e._id))):Object(l.jsx)("h4",{children:"No Notice yet"})})]})},n=a(638);var d=function(e){let{date:t,setdate:a,title:c,settitle:s,handleCreate:i,loading:d,createdby:r,setcreatedby:o,description:j,setdescription:b}=e;const{register:h,handleSubmit:m,errors:u}=Object(n.a)();return Object(l.jsxs)("div",{className:"content__container mb-5",children:[Object(l.jsx)("h3",{children:"Create A Notice"}),Object(l.jsxs)("form",{className:"row",action:"",children:[Object(l.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:"Title"}),Object(l.jsx)("input",{type:"text",ref:h({required:!0}),value:c,onChange:e=>s(e.target.value),className:"form-control py-4",name:"title"}),u.title&&Object(l.jsx)("div",{className:"text-danger",children:"This field is required"})]}),Object(l.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:"Date"}),Object(l.jsx)("input",{type:"date",value:t,ref:h({required:!0}),onChange:e=>a(e.target.value),className:"form-control py-4",name:"date"}),u.date&&Object(l.jsx)("div",{className:"text-danger",children:"This field is required"})]}),Object(l.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:"Description"}),Object(l.jsx)("textarea",{value:j,onChange:e=>b(e.target.value),rows:5,className:"form-control",name:"description"})]}),Object(l.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(l.jsx)("label",{className:"form-label",children:"Created By"}),Object(l.jsx)("input",{type:"text",ref:h({required:!0}),value:r,onChange:e=>o(e.target.value),className:"form-control  py-4",name:"createdby"})]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-2",children:Object(l.jsx)("button",{disabled:d,onClick:m(i),className:"btn blue__btn",children:"Create"})}),Object(l.jsx)("div",{className:"col-2",children:Object(l.jsx)("button",{disabled:d,onClick:e=>{e.preventDefault(),a(""),s(""),o(""),b("")},className:"btn btn-danger",children:"Cancel"})})]})]})]})},r=a(27),o=(a(26),a(614));t.default=function(){const[e,t]=Object(c.useState)([]),[a,s]=Object(c.useState)([]),[n,j]=Object(c.useState)(""),[b,h]=Object(c.useState)(""),[m,u]=Object(c.useState)(""),[O,x]=Object(c.useState)(""),[v,p]=Object(c.useState)(""),[f,N]=Object(c.useState)(""),[g,y]=Object(c.useState)(""),[C,D]=Object(c.useState)(!1),[S,_]=Object(c.useState)(""),[w,T]=Object(c.useState)(""),[k,B]=Object(c.useState)(""),[q,E]=Object(c.useState)(""),[M,Y]=Object(c.useState)(!1),[A,F]=Object(c.useState)("");Object(c.useEffect)((()=>{r.a.get("/notification").then((e=>{t(e.data),console.log(e.data),s(e.data)}))}),[]);const L={date:k,setdate:B,loading:M,handleCreate:()=>{Y(!0),r.a.put("/notification/update/".concat(A),{title:S,date:k,createdBy:q,description:w}).then((a=>{if(Y(!1),a.data.error)return Object(o.c)(a.data.error),0;Object(o.m)("Notice successfully edited"),_(""),B(""),E(""),T(""),D(!1);let c=e.filter((e=>e._id!==A));t([a.data.doc,...c])})).catch((e=>{console.log(e),Y(!1),Object(o.c)("Failed to create")}))},title:S,settitle:_,description:w,setdescription:T,createdby:q,setcreatedby:E,seteditID:F};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{className:"mb-3",children:"Notice Board"}),Object(l.jsx)(d,{date:b,setdate:h,loading:v,handleCreate:()=>{p(!0),r.a.post("/notification/create",{title:n,date:b,createdBy:m,description:O}).then((a=>{if(p(!1),a.data.error)return Object(o.c)(a.data.error),0;Object(o.m)("Notice created"),j(""),h(""),u(""),x(""),t([a.data.doc,...e])})).catch((e=>{console.log(e),p(!1),Object(o.c)("Failed to create")}))},title:n,settitle:j,description:O,setdescription:x,createdby:m,setcreatedby:u}),Object(l.jsx)("div",{id:"notifications",children:Object(l.jsx)(i,{searchDate:f,openEdit:C,handleReset:e=>{e.preventDefault(),y(""),N(""),t(a)},setopenEdit:D,handleSearch:e=>{if(e.preventDefault(),n||b){let e=[];n&&(e=a.filter((e=>e.title.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase())))),b&&(e=a.filter((e=>new Date(e.createdAt).toISOString().slice(0,10)===b))),t(e)}else t(a)},setsearchDate:N,searchTitle:g,setsearchTitle:y,notices:e,handleDelete:a=>{a.preventDefault(),r.a.delete("/notification/delete/".concat(A)).then((a=>{if(a.data.error)return Object(o.c)(a.data.error),0;t(e.filter((e=>e._id!==A))),Object(o.m)("Notice deleted")})).catch((e=>{Object(o.c)("Failed to delete")}))},editData:L})})]})}},933:function(e,t,a){"use strict";a(0);var c=a(617),s=a.n(c),l=a(1499),i=a(1338),n=a(993),d=a.n(n),r=a(97),o=a(711),j=a(783),b=a(791),h=a(636),m=a.n(h),u=a(1285),O=a(638),x=a(10);const v=Object(r.a)((e=>({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})))((e=>{const{children:t,classes:a,onClose:c,...s}=e;return Object(x.jsxs)(j.a,{disableTypography:!0,className:a.root,...s,children:[Object(x.jsx)(u.a,{variant:"h6",children:t}),c?Object(x.jsx)(i.a,{"aria-label":"close",className:a.closeButton,onClick:c,children:Object(x.jsx)(m.a,{})}):null]})})),p=Object(r.a)((e=>({root:{padding:e.spacing(2)}})))(b.a);function f(e){let{open:t,setOpen:a,handleDelete:c,editData:l}=e;const{register:i,handleSubmit:n,errors:d}=Object(O.a)(),r=()=>{a(!1)};return Object(x.jsx)("div",{children:Object(x.jsxs)(o.a,{onClose:r,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"customized-dialog-title",open:t,children:[Object(x.jsx)(v,{id:"customized-dialog-title",onClose:r,children:"Edit Notice"}),Object(x.jsx)(p,{dividers:!0,children:Object(x.jsxs)("form",{className:"row",action:"",children:[Object(x.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(x.jsx)("label",{className:"form-label",children:"Title"}),Object(x.jsx)("input",{type:"text",ref:i({required:!0}),value:null===l||void 0===l?void 0:l.title,onChange:e=>null===l||void 0===l?void 0:l.settitle(e.target.value),className:"form-control py-4",name:"title"}),d.title&&Object(x.jsx)("div",{className:"text-danger",children:"This field is required"})]}),Object(x.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(x.jsx)("label",{className:"form-label",children:"Date"}),Object(x.jsx)("input",{type:"date",value:s()(null===l||void 0===l?void 0:l.date).format("YYYY-MM-D"),ref:i({required:!0}),onChange:e=>null===l||void 0===l?void 0:l.setdate(e.target.value),className:"form-control py-4",name:"date"}),d.date&&Object(x.jsx)("div",{className:"text-danger",children:"This field is required"})]}),Object(x.jsxs)("div",{className:"col-md-12 mb-5",children:[Object(x.jsx)("label",{className:"form-label",children:"Description"}),Object(x.jsx)("textarea",{value:null===l||void 0===l?void 0:l.description,onChange:e=>null===l||void 0===l?void 0:l.setdescription(e.target.value),rows:5,className:"form-control",name:"description"})]}),Object(x.jsxs)("div",{className:"col-md-6 mb-5",children:[Object(x.jsx)("label",{className:"form-label",children:"Created By"}),Object(x.jsx)("input",{type:"text",ref:i({required:!0}),value:null===l||void 0===l?void 0:l.createdby,onChange:e=>null===l||void 0===l?void 0:l.setcreatedby(e.target.value),className:"form-control  py-4",name:"createdby"})]}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-4",children:Object(x.jsx)("button",{disabled:null===l||void 0===l?void 0:l.loading,onClick:n(null===l||void 0===l?void 0:l.handleCreate),className:"btn blue__btn",children:"Save Changes"})}),Object(x.jsx)("div",{className:"col-4",children:Object(x.jsx)("button",{onClick:c,className:"btn btn-danger",children:"Delete"})})]})]})})]})})}t.a=function(e){let{description:t,createdBy:a,date:c,title:n,createdAt:r,isEdit:o,id:j,open:b,setOpen:h,editData:m,handleDelete:u}=e;const O=["#2ad7c5","#ffa201","#f939a1"];let v=O[Math.floor(Math.random()*O.length)];return Object(x.jsxs)("div",{className:"notice d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:Object(x.jsx)("strong",{children:n})}),Object(x.jsx)(l.a,{style:{backgroundColor:"".concat(v)},className:"chip__date mb-2",label:s()(c).format(" Do MMMM, YYYY")}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[" ",t," "]})}),Object(x.jsx)("div",{children:Object(x.jsxs)("h6",{children:[a," /"," ",Object(x.jsxs)("span",{className:"text-muted",children:[" ",s()(r).fromNow()]})]})})]}),o&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsx)(i.a,{onClick:()=>(h(!0),null===m||void 0===m||m.setdate(c),null===m||void 0===m||m.settitle(n),null===m||void 0===m||m.setcreatedby(a),null===m||void 0===m||m.setdescription(t),void(null===m||void 0===m||m.seteditID(j))),children:Object(x.jsx)(d.a,{})})}),Object(x.jsx)(f,{editData:m,open:b,handleDelete:u,setOpen:h})]})]})}}}]);
//# sourceMappingURL=171.c4713282.chunk.js.map