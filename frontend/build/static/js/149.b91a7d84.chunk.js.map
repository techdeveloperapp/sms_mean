{"version":3,"sources":["components/messages/inbox/DefaultView.js","components/messages/inbox/SidebarMessage.js","components/messages/inbox/AddUserModel.js","components/messages/inbox/Sidebar.js","components/messages/inbox/Message.js","components/messages/inbox/MessageContainer.js","StudentComponents/messages/Chat.js"],"names":["DefaultView","_jsx","className","children","_jsxs","SidebarMessage","_ref","chat","currentUser","user","setuser","useState","lastmessage","setlastmessage","messages","useSelector","selectNotifications","dispatch","useDispatch","useEffect","userId","requestor_id","acceptor_id","axios","get","concat","trim","then","res","data","profileUrl","name","surname","pop","Link","onClick","async","put","id","console","log","newMessages","filter","i","type","setNotifications","handleOpen","_id","to","Avatar","alt","getIntial","src","getImgSrc","getCapitalize","getTrimString","timeStamp","date","message","DialogTitle","withStyles","theme","root","margin","padding","spacing","icon","width","height","closeButton","position","right","top","color","palette","grey","props","classes","onClose","other","MuiDialogTitle","disableTypography","Typography","variant","IconButton","CloseIcon","DialogContent","MuiDialogContent","DialogActions","MuiDialogActions","CustomizedDialogs","open","setOpen","search","setsearch","handleSearch","loadingSearch","searchResults","loading","handleSendRequest","setsearchResults","handleClose","Dialog","fullWidth","maxWidth","action","onSubmit","SearchIcon","value","onChange","e","target","placeholder","CancelIcon","handleClear","CircularProgress","style","map","userID","Button","autoFocus","Sidebar","chats","setchats","selectUser","setloadingSearch","setloading","PersonAddIcon","sort","x","y","updatedAt","AddUserModel","preventDefault","results","catch","err","post","error","errorAlert","result","Message","senderID","MessageContainer","useParams","setmessages","setmessage","messagesEndRef","React","createRef","scrollToBottom","current","scrollIntoView","behavior","_res$data","_res$data2","_res$data3","_res$data4","response","ref","channelID","_res$data$doc","doc","Messaging","Switch","Route","component","path"],"mappings":"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","file":"static/js/149.b91a7d84.chunk.js","sourcesContent":["import React from 'react'\n\nfunction DefaultView() {\n    return (\n        <div className=\"default__chat\">\n            <div>\n            <h1>Welcome , Admin </h1>\n            <h4>Messaging Chat system</h4>\n            </div>\n       </div>\n    )\n}\n\nexport default DefaultView\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Avatar } from \"@material-ui/core\";\nimport axios from \"../../../store/axios\";\nimport {\n  getIntial,\n  getImgSrc,\n  getCapitalize,\n  timeStamp,\n  getTrimString,\n} from \"../../../utils\";\nimport {\n  selectNotifications,\n  setNotifications,\n} from \"../../../store/slices/schoolSlice\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nfunction SidebarMessage({ chat, currentUser }) {\n  const [user, setuser] = useState({});\n  const [lastmessage, setlastmessage] = useState({});\n  const messages = useSelector(selectNotifications);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    let userId =\n      currentUser === chat?.requestor_id\n        ? chat?.acceptor_id\n        : chat?.requestor_id;\n    axios.get(`/user/${userId.trim()}`).then((res) => {\n      let data = res.data.user;\n      setuser({\n        profileUrl: data?.profileUrl,\n        name: data?.name,\n        surname: data?.surname,\n      });\n      setlastmessage(chat?.messages.pop());\n    });\n  }, [chat, currentUser]);\n\n  const handleOpen = async (id) => {\n    await axios.put(`/chats/update/chat/${id}/${currentUser}`).then((res) => {\n      console.log(res);\n      let newMessages = messages.filter((i) => i.type !== \"chat\");\n      dispatch(setNotifications(newMessages));\n    });\n  };\n\n  return (\n    <div className=\"sidemessage\">\n      <Link\n        onClick={() => handleOpen(chat?._id)}\n        to={`/messages/chat/${chat?._id}`}\n        className=\"d-flex\"\n      >\n        <div className=\"mr-2\">\n          <Avatar\n            alt={getIntial(user?.name || \"O\")}\n            src={getImgSrc(user?.profileUrl)}\n          ></Avatar>\n        </div>\n        <div>\n          <div className=\"d-flex align-center justify-content-between w-100\">\n            <h6>\n              {getCapitalize(user?.name)}{\" \"}\n              {user?.surname && getTrimString(getCapitalize(user?.surname), 5)}\n            </h6>\n            <small className=\"text-muted\">{timeStamp(lastmessage?.date)}</small>\n          </div>\n          <span>\n            {getTrimString(lastmessage?.message || \"last message...\", 20)}\n          </span>\n        </div>\n      </Link>\n    </div>\n  );\n}\n\nexport default SidebarMessage;\n","import React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\nimport MuiDialogContent from \"@material-ui/core/DialogContent\";\nimport MuiDialogActions from \"@material-ui/core/DialogActions\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Typography from \"@material-ui/core/Typography\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  icon: {\n    width: \"50px\",\n    height: \"50px\",\n  },\n  closeButton: {\n    position: \"absolute\",\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n});\n\nconst DialogTitle = withStyles(styles)((props) => {\n  const { children, classes, onClose, ...other } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\n      <Typography variant=\"h6\">{children}</Typography>\n      {onClose ? (\n        <IconButton\n          aria-label=\"close\"\n          className={classes.closeButton}\n          onClick={onClose}\n        >\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  );\n});\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions);\n\nexport default function CustomizedDialogs({\n  open,\n  setOpen,\n  search,\n  setsearch,\n  handleSearch,\n  loadingSearch,\n  searchResults,\n  loading,\n  handleSendRequest,\n  setsearchResults,\n}) {\n  const handleClose = () => {\n    setsearch(\"\");\n    setsearchResults(\"\");\n    setOpen(false);\n  };\n\n  const handleClear = () => {\n    setsearch(\"\");\n  };\n\n  return (\n    <div>\n      <Dialog\n        fullWidth={true}\n        maxWidth=\"sm\"\n        onClose={handleClose}\n        aria-labelledby=\"customized-dialog-title\"\n        open={open}\n      >\n        <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n          Find User\n        </DialogTitle>\n        <DialogContent>\n          <form action=\"\" onSubmit={handleSearch}>\n            <div className=\"search__user\">\n              <div>\n                <SearchIcon />\n                <input\n                  value={search}\n                  onChange={(e) => setsearch(e.target.value)}\n                  type=\"text\"\n                  placeholder=\"Search by name or userID\"\n                />\n              </div>\n              {search && !loadingSearch && <CancelIcon onClick={handleClear} />}\n              <div>\n                {loadingSearch && (\n                  <CircularProgress style={{ width: \"20px\", height: \"20px\" }} />\n                )}\n              </div>\n            </div>\n          </form>\n          <div className=\"mt-3 d-flex results__container justify-content-between align-items-start\">\n            <ul>\n              {searchResults &&\n                searchResults.map((e) => (\n                  <li>\n                    <button\n                      onClick={() => handleSendRequest(e?.userID)}\n                      className=\"btn\"\n                    >\n                      {e.name} {e.surname} - {e.userID}\n                    </button>\n                  </li>\n                ))}\n            </ul>\n            {loading && (\n              <CircularProgress style={{ width: \"20px\", height: \"20px\" }} />\n            )}\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button autoFocus onClick={handleClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport SidebarMessage from \"./SidebarMessage\";\nimport axios from \"../../../store/axios\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../../store/slices/userSlice\";\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport AddUserModel from \"./AddUserModel\";\nimport { errorAlert, successAlert } from \"src/utils\";\n\nfunction Sidebar() {\n  const [chats, setchats] = useState([]);\n  const user = useSelector(selectUser);\n  const [open, setOpen] = useState(false);\n  const [search, setsearch] = useState(\"\");\n  const [searchResults, setsearchResults] = useState(\"\");\n  const [loadingSearch, setloadingSearch] = useState(false);\n  const [loading, setloading] = useState(false);\n\n  useEffect(() => {\n    axios.get(`/chats/chats/${user?.id}`).then((res) => {\n      setchats(res.data);\n    });\n  }, [user]);\n\n  const handleSendRequest = (id) => {\n    setloading(true);\n    axios\n      .post(`/chats/create`, {\n        acceptor_id: id,\n        requestor_id: user?.userID,\n      })\n      .then((res) => {\n        setloading(false);\n        if (res.data.error) {\n          return errorAlert(res.data.error);\n        }\n        setOpen(false);\n        //successAlert(`Friend request has been successfully send to ${id}`);\n        axios.get(`/chats/chats/${user?.userID}`).then((result) => {\n          setchats(result.data);\n        });\n      })\n      .catch((err) => {\n        errorAlert(\"Faild\");\n        setloading(false);\n      });\n  };\n\n  const handleSearchUser = (e) => {\n    console.log(\"search\");\n    e.preventDefault();\n    if (search) {\n      setloadingSearch(true);\n      axios\n        .get(`/users/search/${search}`)\n        .then((res) => {\n          let results = res.data;\n          setloadingSearch(false);\n          setsearchResults(results);\n        })\n        .catch((err) => {\n          console.log(err);\n          setloading(false);\n        });\n    }\n  };\n\n  return (\n    <div className=\"sidebar\">\n      <div className=\"sidebar__header p-2 mb-2\">\n        <div className=\"d-flex justify-content-between align-items-center\">\n          <h5>\n            <strong>Chats</strong>\n          </h5>\n          <div>\n            <button onClick={() => setOpen(true)} className=\"btn\">\n              <PersonAddIcon />\n            </button>\n          </div>\n        </div>\n      </div>\n      {/* <div className=\"sidebar__search p-2\">\n        <form action=\"\">\n          <input type=\"text\" placeholder=\"Search...\" />\n          <SearchIcon />\n        </form>\n      </div> */}\n      <div>\n        {chats &&\n          chats\n            .sort((x, y) => {\n              return x.updatedAt - y.updatedAt;\n            })\n            .map((chat) => (\n              <SidebarMessage\n                key={chat._id}\n                chat={chat}\n                currentUser={user?.id}\n              />\n            ))}\n      </div>\n      <AddUserModel\n        search={search}\n        setsearch={setsearch}\n        handleSearch={handleSearchUser}\n        open={open}\n        searchResults={searchResults}\n        setsearchResults={setsearchResults}\n        loadingSearch={loadingSearch}\n        setOpen={setOpen}\n        loading={loading}\n        handleSendRequest={handleSendRequest}\n      />\n    </div>\n  );\n}\n\nexport default Sidebar;\n","import React from 'react'\nimport {timeStamp} from '../../../utils'\n\nfunction Message({message, currentUser}) {\n    return (\n        <div className={currentUser === message?.senderID? \"sender__mesaage message\" : \"message\"}>\n            <div className=\"message__content\">\n               {message?.message}\n            </div>\n            <div className=\"message__time \">{timeStamp(message.date)}</div>\n        </div>\n    )\n}\n\nexport default Message\n","import React, { useState, useEffect } from \"react\";\nimport Message from \"./Message\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"../../../store/axios\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../../store/slices/userSlice\";\nimport { Avatar } from \"@material-ui/core\";\nimport { getImgSrc, getCapitalize, getIntial } from \"../../../utils\";\n\nfunction MessageContainer() {\n  const { id } = useParams();\n  const [messages, setmessages] = useState([]);\n  const [message, setmessage] = useState(\"\");\n  const [user, setuser] = useState({});\n  const currentUser = useSelector(selectUser);\n\n  const messagesEndRef = React.createRef();\n\n  useEffect(() => {\n    scrollToBottom();\n  });\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    axios.get(`/chats/chat/${id}`).then(async (res) => {\n      setmessages(res.data?.messages);\n      let userId =\n        currentUser?.id === res.data?.requestor_id\n          ? res.data?.acceptor_id\n          : res.data?.requestor_id;\n      await axios.get(`/user/${userId}`).then((response) => {\n        setuser(response.data.user);\n      });\n    });\n  }, [id, currentUser]);\n\n  const handleSendMessage = (e) => {\n    e.preventDefault();\n    if (message) {\n      axios\n        .put(`/chats/send/${id}`, {\n          message,\n          senderID: currentUser?.id,\n          channelID: id,\n        })\n        .then((res) => {\n          console.log(res.data);\n          setmessages(res.data.doc?.messages);\n          setmessage(\"\");\n        });\n    }\n  };\n\n  return (\n    <div className=\"message__container\">\n      <div className=\"header d-flex\">\n        <Avatar\n          src={getImgSrc(user?.profileUrl)}\n          alt={getIntial(user?.name || \"U\")}\n        />\n        <div className=\"ml-3\">\n          <h6>\n            {\" \"}\n            {getCapitalize(user?.name || \"A\")} {getCapitalize(user?.surname)}\n          </h6>\n          <span>{user?.userID}</span>\n        </div>\n      </div>\n      <div className=\"message__messages p-2\">\n        {messages &&\n          messages.map((e) => (\n            <Message message={e} key={e._id} currentUser={currentUser?.id} />\n          ))}\n        <div ref={messagesEndRef} />\n      </div>\n      <form onSubmit={handleSendMessage} className=\"send\">\n        <input\n          value={message}\n          onChange={(e) => setmessage(e.target.value)}\n          type=\"text\"\n          placeholder=\"Type here ...\"\n        />\n        <button type=\"submit\" className=\"btn\">\n          Send\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default MessageContainer;\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Sidebar from \"../../components/messages/inbox/Sidebar\";\nimport Message from \"../../components/messages/inbox/MessageContainer\";\nimport DefaultView from \"../../components/messages/inbox/DefaultView\";\n\nfunction Messaging() {\n  return (\n    <div>\n      <div className=\" messages__container \">\n        <Sidebar />\n        <div className=\"containing__chat\">\n          <Switch>\n            <Route component={Message} path=\"/messages/chat/:id\" />\n            <Route component={DefaultView} path=\"/messages/chat\" />\n          </Switch>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Messaging;\n"],"sourceRoot":""}