(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[167],{1339:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(798),c=s(27),l=s(614),o=s(84),r=s(26),d=s(59),i=s(10);t.default=function(){const[e,t]=Object(a.useState)(""),[s,m]=Object(a.useState)([]),[j,b]=Object(a.useState)(""),[h,u]=Object(a.useState)(""),p=Object(o.c)(r.c),O=Object(o.c)(d.d),[v,x]=Object(a.useState)("");return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"mb-5 content__container row",children:[Object(i.jsx)("h3",{children:"Select Student "}),Object(i.jsxs)("form",{action:"",onSubmit:e=>{e.preventDefault(),c.a.get("/students/search/".concat(h)).then((e=>{if(console.log(e.data),e.data.error)return console.log("error"),Object(l.c)(e.data.error),0;m(e.data.users.map((e=>({id:e.userID,name:e.name,telephone:(null===e||void 0===e?void 0:e.mobilenumber)||(null===e||void 0===e?void 0:e.telephone),surname:e.surname}))))}))},className:"mb-5 col-md-6",children:[Object(i.jsx)("label",{className:"form-label",children:"Search Student by Name or Student ID"}),Object(i.jsx)("input",{value:h,onChange:e=>u(e.target.value),className:"form-control",type:"text",placeholder:"Type here..."})]}),Object(i.jsxs)("div",{className:"col-md-5",children:[Object(i.jsx)("label",{className:"form-label",children:"OR Select Student's Class"}),Object(i.jsxs)("select",{onChange:e=>(e=>{console.log(e),c.a.get("/students/class/".concat(e)).then((e=>{if(console.log(e.data),e.data.error)return console.log("error"),Object(l.c)(e.data.error);m(e.data.users.map((e=>({id:e.userID,name:e.name,telephone:(null===e||void 0===e?void 0:e.telephone)||(null===e||void 0===e?void 0:e.mobilenumber),surname:e.surname}))))}))})(e.target.value),id:"inputState",className:"form-select",children:[Object(i.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),p.map((e=>Object(i.jsx)("option",{value:e.classCode,children:e.name},e._id)))]})]})]}),s.length>0&&Object(i.jsx)(n.a,{message:e,setmessage:t,onSend:a=>{if(a.preventDefault(),e&&j){x(!0);let a=s.find((e=>e.id===j));if(null===a||void 0===a||!a.telephone)return x(!1),Object(l.c)("Student does not have phone number");console.log(a),c.a.post("/chats",{message:e,telephone:null===a||void 0===a?void 0:a.telephone,userID:j,sender:null===O||void 0===O?void 0:O.id}).then((e=>{if(x(!1),e.data.error)return Object(l.c)(e.data.error),0;Object(l.m)("message send"),t("")})).catch((e=>{console.log(e),x(!1)}))}},recipientsOptions:s,recipient:j,setrecipient:b,sender:null===O||void 0===O?void 0:O.id,loading:v,searchOptions:()=>s.map((e=>Object(i.jsxs)("option",{value:e.id,children:[e.name," ",e.surname," ",e.id," "]},e.id))),sendto:"Student"})]})}},798:function(e,t,s){"use strict";s(0);var a=s(10);t.a=function(e){let{message:t,setmessage:s,onSend:n,recipient:c,setrecipient:l,sender:o,sendto:r,searchOptions:d,loading:i,error:m}=e;return Object(a.jsxs)("form",{action:"",className:" content__container form__sender",children:[Object(a.jsx)("div",{className:"header",children:Object(a.jsxs)("h3",{children:["Send Message to ",r]})}),Object(a.jsxs)("div",{className:"row mb-2 px-3",children:[Object(a.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Recipient:"}),Object(a.jsx)("div",{className:"col-sm-10",children:Object(a.jsxs)("select",{value:c,onChange:e=>l(e.target.value),id:"inputState",className:"form-select",children:[Object(a.jsx)("option",{defaultChecked:!0,hidden:!0,children:"Choose..."}),d?d():Object(a.jsx)("option",{disabled:!0,children:"No options"})]})})]}),Object(a.jsxs)("div",{className:"row mb-2 px-3",children:[Object(a.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Sender:"}),Object(a.jsx)("div",{className:"col-sm-10",children:Object(a.jsx)("input",{className:"form-control",value:o,type:"text",readOnly:!0})})]}),Object(a.jsxs)("div",{className:"mb-2 row",children:[Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)("textarea",{value:t,onChange:e=>s(e.target.value),className:"form-control",name:"",rows:"10",required:!0,placeholder:"Type here"})}),m&&Object(a.jsx)("div",{className:"text-danger text-center mb-2",children:m}),Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)("button",{disabled:i,onClick:n,className:"btn blue__btn w-100",children:[i&&Object(a.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Send"]})})]})]})}}}]);
//# sourceMappingURL=167.f0768ff8.chunk.js.map