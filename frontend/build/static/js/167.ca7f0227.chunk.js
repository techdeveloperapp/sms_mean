(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[167],{1375:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(811),c=s(27),r=s(614),l=s(84),o=s(59),d=s(10);t.default=function(){const[e,t]=Object(a.useState)(""),[s,i]=Object(a.useState)(""),m=Object(l.c)(o.d),[h,b]=Object(a.useState)(!1),j=[{id:"students",name:"All Students"},{id:"parents",name:"All Parents"},{id:"staff",name:"All Staff"}];return Object(d.jsx)("div",{children:Object(d.jsx)(n.a,{message:e,setmessage:t,onSend:async a=>{if(a.preventDefault(),e&&s)switch(b(!0),s){case"staff":return await c.a.get("/teachers").then((s=>{s.data.map((async s=>await c.a.post("/chats",{message:e,telephone:s.telephone||(null===s||void 0===s?void 0:s.mobilenumber),senderID:null===m||void 0===m?void 0:m.id,userID:null===s||void 0===s?void 0:s.userID}).then((e=>{if(b(!1),e.data.error)return Object(r.c)(e.data.error),0;Object(r.m)("message send to all staff members"),t("")})).catch((e=>{b(!1),console.log(e)}))))}));case"students":return await c.a.get("/students").then((s=>{s.data.map((async s=>await c.a.post("/chats",{message:e,userID:null===s||void 0===s?void 0:s.userID,telephone:s.telephone||(null===s||void 0===s?void 0:s.mobilenumber),senderID:null===m||void 0===m?void 0:m.id}).then((e=>{if(b(!1),e.data.error)return Object(r.c)(e.data.error),0;Object(r.m)("message send to all students"),t("")})).catch((e=>{b(!1),console.log(e)}))))}));case"parents":return await c.a.get("/students/parents").then((s=>{let a=s.data.docs;console.log(a),a.length>0?a.map((async s=>await c.a.post("/chats",{message:e,parent:s._id,userID:"parent",telephone:null===s||void 0===s?void 0:s.mobile,sender:null===m||void 0===m?void 0:m.id}).then((e=>{if(b(!1),e.data.error)return Object(r.c)(e.data.error),0;Object(r.m)("message send to all parents"),t("")})).catch((e=>{b(!1),console.log(e)})))):Object(r.c)("There are parents data"),b(!1)}))}},recipientsOptions:j,recipient:s,setrecipient:i,sender:null===m||void 0===m?void 0:m.id,loading:h,searchOptions:()=>j.map((e=>Object(d.jsx)("option",{value:e.id,children:e.name},e.id))),sendto:"All"})})}},811:function(e,t,s){"use strict";s(0);var a=s(10);t.a=function(e){let{message:t,setmessage:s,onSend:n,recipient:c,setrecipient:r,sender:l,sendto:o,searchOptions:d,loading:i,error:m}=e;return Object(a.jsxs)("form",{action:"",className:" content__container form__sender",children:[Object(a.jsx)("div",{className:"header",children:Object(a.jsxs)("h3",{children:["Send Message to ",o]})}),Object(a.jsxs)("div",{className:"row mb-2 px-3",children:[Object(a.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Recipient:"}),Object(a.jsx)("div",{className:"col-sm-10",children:Object(a.jsxs)("select",{value:c,onChange:e=>r(e.target.value),id:"inputState",className:"form-select",children:[Object(a.jsx)("option",{defaultChecked:!0,hidden:!0,children:"Choose..."}),d?d():Object(a.jsx)("option",{disabled:!0,children:"No options"})]})})]}),Object(a.jsxs)("div",{className:"row mb-2 px-3",children:[Object(a.jsx)("label",{className:"col-sm-2",htmlFor:"",children:"Sender:"}),Object(a.jsx)("div",{className:"col-sm-10",children:Object(a.jsx)("input",{className:"form-control",value:l,type:"text",readOnly:!0})})]}),Object(a.jsxs)("div",{className:"mb-2 row",children:[Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)("textarea",{value:t,onChange:e=>s(e.target.value),className:"form-control",name:"",rows:"10",required:!0,placeholder:"Type here"})}),m&&Object(a.jsx)("div",{className:"text-danger text-center mb-2",children:m}),Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)("button",{disabled:i,onClick:n,className:"btn blue__btn w-100",children:[i&&Object(a.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Send"]})})]})]})}}}]);
//# sourceMappingURL=167.ca7f0227.chunk.js.map