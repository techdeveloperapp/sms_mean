(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[150],{1040:function(e,s,a){"use strict";var t=a(0),l=a(457),c=a(936),o=a.n(c),n=a(1498),r=a(614),i=a(27),d=a(84),j=a(59),b=a(7),m=a(461),u=a(10);const h=Object(l.a)((e=>({root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},profileIcon:{}})));s.a=function(e){let{id:s,profile:a}=e;const l=h(),[c,O]=Object(t.useState)(""),[p,v]=Object(t.useState)(!1),x=Object(d.b)();return Object(t.useEffect)((()=>{O(a)}),[a]),Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{accept:"image/*",onChange:e=>{const a=e.target.files[0];if((null===a||void 0===a?void 0:a.size)>2e6)Object(r.c)("image is too large");else if(a){v(!0);const e=new FileReader;e.readAsDataURL(a),e.onloadend=()=>{i.a.post("/upload",{dataUrl:e.result}).then((e=>{const a=e.data.url;console.log(a),i.a.post("/update/profile/".concat(s),{profileUrl:a}).then((e=>{if(v(!1),e.data.error)return Object(r.c)("Profile update failed"),0;O(a),x(Object(j.e)({photoUrl:a})),localStorage.setItem(b.a.PhotoURL,a)}))})).catch((e=>{console.log(e),v(!1),Object(r.c)("Profile update failed")}))}}else console.log("no file selected"),Object(r.c)("no file selected")},className:l.input,disabled:p,id:"icon-button-file",type:"file"}),Object(u.jsxs)("label",{className:"profileContainer",htmlFor:"icon-button-file",children:[Object(u.jsx)(n.a,{src:Object(r.g)(c),className:"large__avatar","aria-label":"upload picture",component:"span",children:p?Object(u.jsx)(m.a,{}):Object(u.jsx)(o.a,{})}),Object(u.jsx)("div",{className:"profileIcon",children:"Change Profile"})]})]})}},1045:function(e,s,a){"use strict";a(0);var t=a(16),l=a(10);s.a=function(e){let{dispatch:s,loggout:a,user:c}=e;const o=Object(t.g)();return Object(l.jsx)("div",{className:"content__container",children:Object(l.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(l.jsxs)("h6",{children:["You are logged-in as ",null===c||void 0===c?void 0:c.id,"- ",null===c||void 0===c?void 0:c.name," ",null!==c&&void 0!==c&&c.lastName?null===c||void 0===c?void 0:c.lastName:""]}),Object(l.jsx)("button",{onClick:()=>{s(a()),localStorage.clear(),o.push("/login")},className:"btn btn-danger",children:"Logout"})]})})}},1046:function(e,s,a){"use strict";var t=a(0),l=a(614),c=a(27),o=a(638),n=a(10);s.a=function(e){let{id:s}=e;const[a,r]=Object(t.useState)(""),[i,d]=Object(t.useState)(""),{register:j,handleSubmit:b,errors:m}=Object(o.a)(),[u,h]=Object(t.useState)(!1);return Object(n.jsxs)("form",{action:"",className:"mb-5 content__container",children:[Object(n.jsx)("h4",{children:"Change Password"}),Object(n.jsxs)("div",{className:"row mb-3",children:[Object(n.jsx)("label",{className:"col-sm-3 col-form-label",children:"Old Password"}),Object(n.jsxs)("div",{className:"col-sm-9",children:[Object(n.jsx)("input",{onChange:e=>r(e.target.value),ref:j({required:!0}),value:a,type:"password",className:"form-control",name:"oldpassword"}),m.oldpassword&&Object(n.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(n.jsxs)("div",{className:"row mb-3",children:[Object(n.jsx)("label",{className:"col-sm-3 col-form-label",children:"New Password"}),Object(n.jsxs)("div",{className:"col-sm-9",children:[Object(n.jsx)("input",{onChange:e=>d(e.target.value),ref:j({required:!0}),value:i,type:"password",className:"form-control",name:"newpassword"}),m.newpassword&&Object(n.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(n.jsx)("div",{className:"row mb-3",children:Object(n.jsx)("div",{className:"offset-3 col-sm-9",children:Object(n.jsxs)("button",{disabled:u,type:"submit",onClick:b((()=>{h(!0),c.a.post("/change/password/".concat(s),{newPassword:i,oldPassword:a}).then((e=>{if(h(!1),e.data.error)return Object(l.c)(e.data.error),0;Object(l.m)("password successfully change"),r(""),d("")})).catch((e=>{h(!1),console.log(e),Object(l.c)("Failed to change password")}))})),className:"btn blue__btn",children:[u&&Object(n.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Submit"]})})})]})}},1483:function(e,s,a){"use strict";a.r(s);var t=a(0),l=a(1045),c=a(1040),o=a(84),n=a(59),r=a(27),i=a(1046),d=a(638),j=a(623),b=a.n(j),m=a(614),u=a(7),h=a(97),O=a(925),p=a(711),v=a(783),x=a(791),f=a(810),g=a(1338),N=a(636),w=a.n(N),C=a(1285),S=a(10);const y=Object(h.a)((e=>({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})))((e=>{const{children:s,classes:a,onClose:t,...l}=e;return Object(S.jsxs)(v.a,{disableTypography:!0,className:a.root,...l,children:[Object(S.jsx)(C.a,{variant:"h6",children:s}),t?Object(S.jsx)(g.a,{"aria-label":"close",className:a.closeButton,onClick:t,children:Object(S.jsx)(w.a,{})}):null]})})),q=Object(h.a)((e=>({root:{padding:e.spacing(2)}})))(x.a),_=Object(h.a)((e=>({root:{margin:0,padding:e.spacing(1)}})))(f.a);function k(e){let{open:s,setOpen:a,setname:t,name:l,handleEdit:c,loading:o}=e;const n=()=>{a(!1)};return Object(S.jsx)("div",{children:Object(S.jsxs)(p.a,{fullWidth:!0,maxWidth:"sm",onClose:n,"aria-labelledby":"customized-dialog-title",open:s,children:[Object(S.jsx)(y,{id:"customized-dialog-title",onClose:n,children:"Edit School Name"}),Object(S.jsx)(q,{children:Object(S.jsx)("div",{className:"row mb-3",children:Object(S.jsx)("div",{className:"col-sm-9",children:Object(S.jsx)("input",{onChange:e=>t(e.target.value),value:l,type:"text",className:"form-control",name:"name"})})})}),Object(S.jsxs)(_,{children:[Object(S.jsxs)(O.a,{disabled:o,autoFocus:!0,onClick:c,color:"primary",children:[o&&Object(S.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Save changes"]}),Object(S.jsx)(O.a,{autoFocus:!0,onClick:n,color:"secondary",children:"Cancel"})]})]})})}s.default=function(){const{register:e,handleSubmit:s,errors:a}=Object(d.a)(),[j,h]=Object(t.useState)({}),O=Object(o.c)(n.d),p=Object(o.b)(),[v,x]=Object(t.useState)(""),[f,g]=Object(t.useState)(""),[N,w]=Object(t.useState)(""),[C,y]=Object(t.useState)(""),[q,_]=Object(t.useState)(""),[P,T]=Object(t.useState)(""),[E,F]=Object(t.useState)(!1),[I,D]=Object(t.useState)(!1),[U,z]=Object(t.useState)(!1);return Object(t.useEffect)((()=>{r.a.get("/school").then((e=>{let s=null===e||void 0===e?void 0:e.data;h(s),x((null===s||void 0===s?void 0:s.name)||"Enter School Name"),w(null===s||void 0===s?void 0:s.motto),y(null===s||void 0===s?void 0:s.email),_(null===s||void 0===s?void 0:s.address),T(null===s||void 0===s?void 0:s.telephone),g(null===s||void 0===s?void 0:s.fullName)}))}),[]),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"content__container d-flex flex-column align-items-center mb-5",children:[Object(S.jsx)(c.a,{id:null===O||void 0===O?void 0:O.userID,profile:null===O||void 0===O?void 0:O.photoUrl}),Object(S.jsxs)("h2",{children:[f," ",Object(S.jsx)("span",{children:Object(S.jsx)(b.a,{onClick:e=>D(!0)})})]}),Object(S.jsxs)("form",{className:"row",children:[Object(S.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(S.jsx)("label",{className:" col-form-label",children:"Name"}),Object(S.jsxs)("div",{className:"",children:[Object(S.jsx)("input",{onChange:e=>x(e.target.value),ref:e({required:!0}),value:v,type:"text",className:"form-control",name:"name"}),a.name&&Object(S.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(S.jsx)("label",{className:" col-form-label",children:"Motto"}),Object(S.jsxs)("div",{className:"",children:[Object(S.jsx)("input",{onChange:e=>w(e.target.value),ref:e({required:!0}),value:N,type:"text",className:"form-control",name:"motto"}),a.motto&&Object(S.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(S.jsx)("label",{className:" col-form-label",children:"Email"}),Object(S.jsxs)("div",{className:"",children:[Object(S.jsx)("input",{onChange:e=>y(e.target.value),ref:e({required:!0}),value:C,type:"email",className:"form-control",name:"email"}),a.email&&Object(S.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(S.jsx)("label",{className:" col-form-label",children:"Telephone"}),Object(S.jsxs)("div",{className:"",children:[Object(S.jsx)("input",{onChange:e=>T(e.target.value),ref:e({required:!0}),value:P,type:"tel",className:"form-control",name:"telephone"}),a.telephone&&Object(S.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 mb-3",children:[Object(S.jsx)("label",{className:" col-form-label",children:"Address"}),Object(S.jsxs)("div",{className:"",children:[Object(S.jsx)("textarea",{rows:5,onChange:e=>_(e.target.value),ref:e({required:!0}),value:q,className:"form-control",name:"address"}),a.address&&Object(S.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(S.jsxs)("div",{className:"col-sm-6 mt-5",children:[Object(S.jsxs)("button",{disabled:E,onClick:s((()=>{F(!0),r.a.put("/school/update/".concat(null===j||void 0===j?void 0:j.userID),{name:v,address:q,motto:N,email:C,telephone:P}).then((e=>{if(F(!1),e.data.error)return Object(m.c)(e.data.error),0;Object(m.m)("Changes are saved"),p(Object(n.e)({name:v})),localStorage.setItem(u.a.NAME,v)})).catch((e=>{console.log(e),F(!1),Object(m.c)("Failed to save changes")}))})),className:"btn blue__btn",children:[E&&Object(S.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Save Changes"]}),Object(S.jsx)("button",{onClick:e=>{e.preventDefault(),x(null===j||void 0===j?void 0:j.name),w(null===j||void 0===j?void 0:j.motto),y(null===j||void 0===j?void 0:j.email),_(null===j||void 0===j?void 0:j.address),T(null===j||void 0===j?void 0:j.telephone)},className:"btn btn-danger ml-3",children:"Cancel"})]})]})]}),Object(S.jsx)(k,{open:I,setOpen:D,name:f,loading:U,setname:g,handleEdit:e=>{e.preventDefault(),z(!0),console.log(f),r.a.put("/school/update/".concat(null===j||void 0===j?void 0:j.userID),{fullName:f}).then((e=>{if(z(!1),e.data.error)return Object(m.c)(e.data.error),0;Object(m.m)("Changes are saved"),D(!1)})).catch((e=>{console.log(e),z(!1),Object(m.c)("Failed to save changes")}))}}),Object(S.jsx)("div",{id:"changepassword",children:Object(S.jsx)(i.a,{id:null===O||void 0===O?void 0:O.id})}),Object(S.jsx)(l.a,{user:O,dispatch:p,loggout:n.c})]})}}}]);
//# sourceMappingURL=150.aa989537.chunk.js.map