(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[164],{1048:function(e,s,t){"use strict";var c=t(0),a=t(638),l=t(27),o=t(10);s.a=function(e){const{register:s,handleSubmit:t,errors:n}=Object(a.a)(),[r,i]=Object(c.useState)([]),[d,j]=Object(c.useState)([]);Object(c.useEffect)((()=>{l.a.get("/classes").then((e=>{console.log(e.data),i(e.data)}))}),[]),Object(c.useEffect)((()=>{l.a.get("/courses").then((e=>{j(e.data)}))}),[]);let{classID:b,setclass:u,subject:h,setsubject:m,topic:O,settopic:f,loading:p,handleAdd:x,handleReset:g,isEdit:v,role:N,setfile:C,notes:S,setnotes:w}=e;return Object(o.jsxs)("form",{className:"row g-3",action:"",children:["admin"===N&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{className:"form-label",children:"Select Class"}),Object(o.jsxs)("select",{value:b,onChange:e=>u(e.target.value),name:"class",className:"form-select",children:[Object(o.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),r.length>0?r.map((e=>Object(o.jsx)("option",{value:e.classCode,children:e.name},e.classCode))):Object(o.jsx)("option",{disabled:!0,children:"No classes available yet"})]})]}),Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{className:"form-label",children:"Select Subject"}),Object(o.jsxs)("select",{value:h,onChange:e=>m(e.target.value),name:"class",className:"form-select",children:[Object(o.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),d.length>0?d.map((e=>Object(o.jsx)("option",{value:e.code,children:e.name},e.code))):Object(o.jsx)("option",{disabled:!0,children:"No courses available yet"})]})]})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Topic"}),Object(o.jsx)("input",{value:O,ref:s({required:!0}),onChange:e=>f(e.target.value),type:"text",className:"form-control",name:"topic"}),n.topic&&Object(o.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Notes"}),Object(o.jsx)("textarea",{value:S,onChange:e=>w(e.target.value),rows:5,className:"form-control",id:"topic"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Upload file"}),Object(o.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.doc,.docx,.pdf, .zip",ref:s({required:!0}),onChange:e=>C(e),className:"form-control",name:"file"}),n.file&&Object(o.jsx)("span",{className:" form-error text-danger mb-2",children:"Please select file"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsxs)("button",{onClick:t(x),className:"btn blue__btn mr-3",children:[p&&Object(o.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),v?"Save Changes":"Add"]}),Object(o.jsx)("button",{onClick:t(g),className:"btn orange__btn",children:"Reset"})]})]})}},1385:function(e,s,t){"use strict";t.r(s);var c=t(0),a=t(1048),l=t(27),o=t(614),n=t(84),r=t(59),i=t(10);s.default=function(){const[e,s]=Object(c.useState)(""),[t,d]=Object(c.useState)(""),[j,b]=Object(c.useState)(""),[u,h]=Object(c.useState)(""),[m,O]=Object(c.useState)(""),f=Object(n.c)(r.d),[p,x]=Object(c.useState)(!1),g=()=>{s(""),d(""),b(""),h(""),O("")};return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"content__container mb-5",children:[Object(i.jsx)("h3",{children:"Add Notes File"}),Object(i.jsx)(a.a,{classID:e,setclass:s,subject:t,setsubject:d,topic:j,settopic:b,file:m,loading:p,handleReset:g,setfile:async e=>{const s=e.target.files[0];if((null===s||void 0===s?void 0:s.size)>2e6)return Object(o.c)("image is too large");const t=new FileReader;t.readAsDataURL(s),t.onloadend=()=>{O(t.result)}},role:null===f||void 0===f?void 0:f.role,handleAdd:async()=>{if(!e)return Object(o.c)("Please select class");if(!t)return Object(o.c)("Please select course");if(!m)return Object(o.c)("Please select file");x(!0);const s=await l.a.post("/upload",{dataUrl:m});if(s.data.error)return Object(o.c)("The file is too big");const c=s.data.url;console.log(c),await l.a.post("/notes/create",{topic:j,classID:e,courseID:t,notes:u,file:c,senderID:null===f||void 0===f?void 0:f.id}).then((e=>{if(console.log(e.data),e.data.error)return Object(o.c)(e.data.error),x(!1),0;Object(o.m)("notes successfully added"),x(!1),g()})).catch((e=>{console.log(e),x(!1),Object(o.c)("File is too big")}))},notes:u,setnotes:h})]})})}}}]);
//# sourceMappingURL=164.c44d7dc4.chunk.js.map