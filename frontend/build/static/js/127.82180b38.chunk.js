(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[127],{1378:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t(646),c=t(681),i=t(123),s=t(27),d=t(16),o=t(614),r=t(84),j=t(26),u=t(10);const b=[{id:"classCode",name:"ID"},{id:"name",name:"Class"},{id:"campusID",name:"Campus"},{id:"group",name:"Group"},{id:"division",name:"Division"},{id:"prefect",name:"Prefect"},{id:"teacherID",name:"Class Teacher"},{id:"sba",name:"S.B.A Config"},{id:"sbaStaff",name:"SBA Staff"}];a.default=function(){const[e,a]=Object(l.useState)(""),[t,h]=Object(l.useState)(""),[v,m]=Object(l.useState)(""),[O,x]=Object(l.useState)([]),[p,f]=Object(l.useState)([]),g=Object(r.c)(j.l),[C,w]=Object(l.useState)(!1),S=Object(r.c)(j.b),_=Object(d.g)(),N=Object(r.b)();Object(l.useEffect)((()=>{w(!0),s.a.get("/classes").then((e=>{w(!1);let a=e.data.map((e=>{var a,t,l;return{...e,num:0,sba:e.sba?"set":"not set",teacherID:((null===(a=g.find((a=>a.userID===e.teacherID)))||void 0===a?void 0:a.name)||"-")+" "+((null===(t=g.find((a=>a.userID===e.teacherID)))||void 0===t?void 0:t.surname)||""),campusID:null===(l=S.find((a=>a._id===e.campusID)))||void 0===l?void 0:l.name}}));x(a),f(a)}))}),[g,S]);const D=[{type:"text",label:"Search Name",value:e,name:"name",onChange:a},{type:"text",label:"Search Campus",value:t,name:"campus",onChange:h},{type:"text",label:"Search Teacher",value:v,name:"teacher",onChange:m}];return Object(u.jsxs)("div",{children:[Object(u.jsx)(c.a,{title:"Search classes ",inputFields:D,handleSearch:a=>{a.preventDefault();let l=[];e&&(l=p.filter((a=>(null===a||void 0===a?void 0:a.name.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===a||void 0===a?void 0:a.classCode.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))))),t&&(l=l.filter((e=>null===e||void 0===e?void 0:e.campusID.toLowerCase().includes(null===t||void 0===t?void 0:t.toLowerCase())))),v&&(l=l.filter((e=>null===e||void 0===e?void 0:e.teacherID.toLowerCase().includes(null===v||void 0===v?void 0:v.toLowerCase())))),x(l)},handleReset:e=>{e.preventDefault(),a(""),h(""),m(""),x(p)}}),Object(u.jsxs)("div",{className:"content__container",children:[Object(u.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(u.jsx)("h3",{children:"Classes List"}),Object(u.jsx)(i.b,{to:"/academics/classes/add",className:"btn orange__btn btn__lg",children:"Add New Class"})]}),Object(u.jsx)(n.a,{handleEdit:e=>{_.push("/academics/classes/edit/".concat(e))},loading:C,handleDelete:a=>{window.confirm("are you sure you want to delete")&&s.a.delete("/classes/delete/".concat(a)).then((async t=>{if(t.data.error)return Object(o.c)(t.data.error),0;x(O.filter((e=>e._id!==a)));let l=O.find((e=>e._id===a));N(Object(j.q)(O.filter((e=>e._id!==a)))),await s.a.post("/activitylog/create",{activity:" ".concat(null===l||void 0===l?void 0:l.name," class was deleted"),user:"admin"}),await await s.a.post("/fees/delete/name",{name:e})}))},data:O,tableHeader:b})]})]})}},623:function(e,a,t){"use strict";var l=t(609),n=t(611);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=n(t(0)),i=(0,l(t(610)).default)(c.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");a.default=i},629:function(e,a,t){"use strict";t(0);var l=t(457),n=t(160),c=t(1338),i=t(626),s=t.n(i),d=t(628),o=t.n(d),r=t(627),j=t.n(r),u=t(625),b=t.n(u),h=t(10);const v=Object(l.a)((e=>({root:{flexShrink:0,marginLeft:e.spacing(2.5)}})));a.a=function(e){const a=v(),t=Object(n.a)(),{count:l,page:i,rowsPerPage:d,onChangePage:r}=e;return Object(h.jsxs)("div",{className:a.root,children:[Object(h.jsx)(c.a,{onClick:e=>{r(e,0)},disabled:0===i,"aria-label":"first page",children:"rtl"===t.direction?Object(h.jsx)(b.a,{}):Object(h.jsx)(s.a,{})}),Object(h.jsx)(c.a,{onClick:e=>{r(e,i-1)},disabled:0===i,"aria-label":"previous page",children:"rtl"===t.direction?Object(h.jsx)(j.a,{}):Object(h.jsx)(o.a,{})}),Object(h.jsx)(c.a,{onClick:e=>{r(e,i+1)},disabled:i>=Math.ceil(l/d)-1,"aria-label":"next page",children:"rtl"===t.direction?Object(h.jsx)(o.a,{}):Object(h.jsx)(j.a,{})}),Object(h.jsx)(c.a,{onClick:e=>{r(e,Math.max(0,Math.ceil(l/d)-1))},disabled:i>=Math.ceil(l/d)-1,"aria-label":"last page",children:"rtl"===t.direction?Object(h.jsx)(s.a,{}):Object(h.jsx)(b.a,{})})]})}},632:function(e,a,t){"use strict";var l=t(609),n=t(611);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=n(t(0)),i=(0,l(t(610)).default)(c.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");a.default=i},639:function(e,a,t){"use strict";var l=t(609),n=t(611);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=n(t(0)),i=(0,l(t(610)).default)(c.createElement("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}),"Toc");a.default=i},646:function(e,a,t){"use strict";t.d(a,"a",(function(){return y}));var l=t(0),n=t.n(l),c=t(457),i=t(941),s=t(942),d=t(937),o=t(939),r=t(940),j=t(686),u=t(1446),b=t(938),h=t(927),v=t(1338),m=t(623),O=t.n(m),x=t(632),p=t.n(x),f=t(629),g=t(617),C=t.n(g),w=t(792),S=t(639),_=t.n(S),N=t(10);const D=Object(c.a)({table:{width:"100%"}});function y(e){var a;let{data:t,tableHeader:l,handleEdit:c,handleDelete:m,loading:x,isCanteen:g,isEdit:S,isItems:y,noActions:M,noData:I}=e;const P=D(),[L,k]=n.a.useState(0),[z,E]=n.a.useState(5),A=z-Math.min(z,(null===t||void 0===t?void 0:t.length)-L*z);return Object(N.jsx)(r.a,{component:h.a,children:Object(N.jsxs)(i.a,{className:P.table,"aria-label":"custom pagination table",children:[Object(N.jsx)(d.a,{children:Object(N.jsxs)(b.a,{children:[l&&(null===l||void 0===l?void 0:l.map((e=>Object(N.jsx)(o.a,{children:e.name},e.id)))),!M&&Object(N.jsx)(o.a,{children:"Actions"})]})}),x?Object(N.jsx)(s.a,{className:"text-center my-5 w-100",children:Object(N.jsx)(b.a,{children:Object(N.jsx)(o.a,{colSpan:l.lenght,children:Object(N.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status"})})})}):Object(N.jsxs)(s.a,{children:[(null===t||void 0===t?void 0:t.length)<=0?Object(N.jsx)(b.a,{children:Object(N.jsx)(o.a,{colSpan:l.length+1,className:"text-center text-danger",children:I||"No data"})}):Object(N.jsx)(N.Fragment,{children:null===(a=z>0?null===t||void 0===t?void 0:t.slice(L*z,L*z+z):t)||void 0===a?void 0:a.map((e=>Object(N.jsxs)(b.a,{children:[l&&(null===l||void 0===l?void 0:l.map((a=>{var t,l;return Object(N.jsx)(o.a,{align:"left",children:(l=e[null===a||void 0===a?void 0:a.id],new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(l)?null===(t=C()(e[null===a||void 0===a?void 0:a.id]))||void 0===t?void 0:t.format("D MMMM YYYY"):e[null===a||void 0===a?void 0:a.id]||"-")},null===a||void 0===a?void 0:a.id)}))),!M&&Object(N.jsx)(o.a,{align:"left",children:Object(N.jsxs)("div",{className:"d-flex align-items-center",children:[Object(N.jsx)(w.a,{title:y?"Manage Inventory":"delete",children:Object(N.jsx)(v.a,{onClick:()=>m(g?e.memberID:e._id),children:y?Object(N.jsx)(_.a,{}):Object(N.jsx)(p.a,{})})}),!S&&Object(N.jsx)(w.a,{title:"edit",children:Object(N.jsx)(v.a,{onClick:()=>c(g?e.memberID:e._id),children:Object(N.jsx)(O.a,{})})})]})})]},e._id)))}),A>0&&Object(N.jsx)(b.a,{style:{height:53},children:Object(N.jsx)(o.a,{colSpan:6})})]}),Object(N.jsx)(j.a,{children:Object(N.jsx)(b.a,{children:(null===t||void 0===t?void 0:t.length)>5&&Object(N.jsx)(u.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],count:null===t||void 0===t?void 0:t.length,rowsPerPage:z,page:L,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:(e,a)=>{k(a)},onChangeRowsPerPage:e=>{E(parseInt(e.target.value,10)),k(0)},ActionsComponent:f.a})})})]})})}},681:function(e,a,t){"use strict";t(0);var l=t(10);a.a=function(e){let{inputFields:a,title:t,handleSearch:n,isReset:c,handleReset:i,noActions:s}=e;return Object(l.jsxs)("form",{className:"mb-5 content__container",children:[Object(l.jsx)("h3",{className:"mb-3",children:t||""}),Object(l.jsxs)("div",{className:"row g-3 mb-3",children:[a&&a.map((e=>Object(l.jsxs)("div",{className:"col-xs-12 col-sm-6 col-md-4",children:[Object(l.jsx)("label",{htmlFor:"",children:e.label}),"select"===e.type?Object(l.jsxs)("select",{value:null===e||void 0===e?void 0:e.value,name:null===e||void 0===e?void 0:e.name,onChange:a=>null===e||void 0===e?void 0:e.onChange(a.target.value),className:"form-select form-select-sm py-2",children:[Object(l.jsx)("option",{hidden:!0,defaultValue:!0,children:"Select"}),(null===e||void 0===e?void 0:e.options.length)>0?null===e||void 0===e?void 0:e.options.map((e=>Object(l.jsx)("option",{value:e.id,children:e.name},e.id))):Object(l.jsx)("option",{disabled:!0,children:"No data "})]}):Object(l.jsx)("input",{type:e.type,value:e.value,name:null===e||void 0===e?void 0:e.name,className:"form-control py-3",placeholder:"Search by ".concat(e.name),onChange:a=>null===e||void 0===e?void 0:e.onChange(a.target.value)})]},null===e||void 0===e?void 0:e.name))),!s&&Object(l.jsxs)("div",{className:"col-xs-12 col-sm-6 col-md-4 d-flex mt-5",children:[Object(l.jsx)("div",{className:"mb-3",children:Object(l.jsx)("button",{className:"btn orange__btn ",onClick:n,children:"Search"})}),!c&&Object(l.jsx)("div",{className:" mb-3 ml-3",children:Object(l.jsx)("button",{onClick:i,className:"btn blue__btn ",children:"Reset"})})]})]})]})}}}]);
//# sourceMappingURL=127.82180b38.chunk.js.map