{"version":3,"sources":["StudentComponents/messages/MessageAdmin.js","components/messages/SendToForm.js"],"names":["MessageAdmin","message","setmessage","useState","recipient","setrecipient","user","useSelector","selectUser","loading","setloading","recipientOptions","id","name","_jsx","children","SendForm","onSend","e","preventDefault","axios","post","sender","userID","telephone","then","res","console","log","data","error","errorAlert","successAlert","catch","err","searchOptions","map","option","value","sendto","SendToForm","_ref","_jsxs","action","className","htmlFor","onChange","target","defaultChecked","hidden","disabled","type","readOnly","rows","required","placeholder","onClick","role"],"mappings":"iIAAA,oEAyEeA,UAlEf,WACE,MAAOC,EAASC,GAAcC,mBAAS,KAChCC,EAAWC,GAAgBF,mBAAS,SACrCG,EAAOC,YAAYC,MAClBC,EAASC,GAAcP,oBAAS,GAEjCQ,EAAmB,CACvB,CACEC,GAAI,QACJC,KAAM,UAwCV,OACEC,cAAA,OAAAC,SACED,cAACE,IAAQ,CACPf,QAASA,EACTC,WAAYA,EACZe,OAzCUC,IACdA,EAAEC,iBACElB,GAAWG,IACbM,GAAW,GACXU,IACGC,KAAK,cAAe,CACnBpB,UACAqB,OAAY,OAAJhB,QAAI,IAAJA,OAAI,EAAJA,EAAMM,GACdW,OAAQnB,EACRoB,UAAW,KAEZC,MAAMC,IAGL,GAFAC,QAAQC,IAAIF,GACZhB,GAAW,GACPgB,EAAIG,KAAKC,MAEX,OADAC,YAAWL,EAAIG,KAAKC,OACb,EAETE,YAAa,gBACb9B,EAAW,GAAG,IAEf+B,OAAOC,IACNP,QAAQC,IAAIM,GACZxB,GAAW,EAAM,IAEvB,EAiBID,QAASA,EACTL,UAAWA,EACX+B,cAhBgBA,IACbxB,EAAiByB,KAAKC,GAC3BvB,cAAA,UAAwBwB,MAAOD,EAAOzB,GAAGG,SACtCsB,EAAOxB,MADGwB,EAAOzB,MAelB2B,OAAO,eACPlC,aAAcA,EACdiB,OAAY,OAAJhB,QAAI,IAAJA,OAAI,EAAJA,EAAMM,MAItB,C,mCCvEA,iBAoFe4B,IAlFf,SAAmBC,GAWf,IAXgB,QAClBxC,EAAO,WACPC,EAAU,OACVe,EAAM,UACNb,EAAS,aACTC,EAAY,OACZiB,EAAM,OACNiB,EAAM,cACNJ,EAAa,QACb1B,EAAO,MACPqB,GACDW,EACC,OACEC,eAAA,QAAMC,OAAO,GAAGC,UAAU,mCAAkC7B,SAAA,CAC1DD,cAAA,OAAK8B,UAAU,SAAQ7B,SACrB2B,eAAA,MAAA3B,SAAA,CAAI,mBAAiBwB,OAEvBG,eAAA,OAAKE,UAAU,gBAAe7B,SAAA,CAC5BD,cAAA,SAAO8B,UAAU,WAAWC,QAAQ,GAAE9B,SAAC,eAGvCD,cAAA,OAAK8B,UAAU,YAAW7B,SACxB2B,eAAA,UACEJ,MAAOlC,EACP0C,SAAW5B,GAAMb,EAAaa,EAAE6B,OAAOT,OACvC1B,GAAG,aACHgC,UAAU,cAAa7B,SAAA,CAEvBD,cAAA,UAAQkC,gBAAc,EAACC,QAAM,EAAAlC,SAAC,cAG7BoB,EACCA,IAEArB,cAAA,UAAQoC,UAAQ,EAAAnC,SAAC,uBAMzB2B,eAAA,OAAKE,UAAU,gBAAe7B,SAAA,CAC5BD,cAAA,SAAO8B,UAAU,WAAWC,QAAQ,GAAE9B,SAAC,YAGvCD,cAAA,OAAK8B,UAAU,YAAW7B,SACxBD,cAAA,SAAO8B,UAAU,eAAeN,MAAOhB,EAAQ6B,KAAK,OAAOC,UAAQ,SAGvEV,eAAA,OAAKE,UAAU,WAAU7B,SAAA,CACvBD,cAAA,OAAK8B,UAAU,SAAQ7B,SACrBD,cAAA,YACEwB,MAAOrC,EACP6C,SAAW5B,GAAMhB,EAAWgB,EAAE6B,OAAOT,OACrCM,UAAU,eACV/B,KAAK,GACLwC,KAAK,KACLC,UAAQ,EACRC,YAAY,gBAGfzB,GAAShB,cAAA,OAAK8B,UAAU,+BAA8B7B,SAAEe,IACzDhB,cAAA,OAAK8B,UAAU,SAAQ7B,SACrB2B,eAAA,UACEQ,SAAUzC,EACV+C,QAASvC,EACT2B,UAAU,sBAAqB7B,SAAA,CAE9BN,GACCK,cAAA,QACE8B,UAAU,mCACVa,KAAK,SACL,cAAY,SAEd,iBAOd,C","file":"static/js/171.921fd9e9.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport SendForm from \"../../components/messages/SendToForm\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\n\nfunction MessageAdmin() {\n  const [message, setmessage] = useState(\"\");\n  const [recipient, setrecipient] = useState(\"admin\");\n  const user = useSelector(selectUser);\n  const [loading, setloading] = useState(false);\n\n  const recipientOptions = [\n    {\n      id: \"admin\",\n      name: \"admin\",\n    },\n  ];\n\n  const onSend = (e) => {\n    e.preventDefault();\n    if (message && recipient) {\n      setloading(true);\n      axios\n        .post(`/chats/user`, {\n          message,\n          sender: user?.id,\n          userID: recipient,\n          telephone: \"\",\n        })\n        .then((res) => {\n          console.log(res);\n          setloading(false);\n          if (res.data.error) {\n            errorAlert(res.data.error);\n            return 0;\n          }\n          successAlert(\"message send\");\n          setmessage(\"\");\n        })\n        .catch((err) => {\n          console.log(err);\n          setloading(false);\n        });\n    }\n  };\n\n  const searchOptions = () => {\n    return recipientOptions.map((option) => (\n      <option key={option.id} value={option.id}>\n        {option.name}\n      </option>\n    ));\n  };\n\n  return (\n    <div>\n      <SendForm\n        message={message}\n        setmessage={setmessage}\n        onSend={onSend}\n        loading={loading}\n        recipient={recipient}\n        searchOptions={searchOptions}\n        sendto=\"School Admin\"\n        setrecipient={setrecipient}\n        sender={user?.id}\n      />\n    </div>\n  );\n}\n\nexport default MessageAdmin;\n","import React from \"react\";\n\nfunction SendToForm({\n  message,\n  setmessage,\n  onSend,\n  recipient,\n  setrecipient,\n  sender,\n  sendto,\n  searchOptions,\n  loading,\n  error,\n}) {\n  return (\n    <form action=\"\" className=\" content__container form__sender\">\n      <div className=\"header\">\n        <h3>Send Message to {sendto}</h3>\n      </div>\n      <div className=\"row mb-2 px-3\">\n        <label className=\"col-sm-2\" htmlFor=\"\">\n          Recipient:\n        </label>\n        <div className=\"col-sm-10\">\n          <select\n            value={recipient}\n            onChange={(e) => setrecipient(e.target.value)}\n            id=\"inputState\"\n            className=\"form-select\"\n          >\n            <option defaultChecked hidden>\n              Choose...\n            </option>\n            {searchOptions ? (\n              searchOptions()\n            ) : (\n              <option disabled>No options</option>\n            )}\n          </select>\n        </div>\n      </div>\n\n      <div className=\"row mb-2 px-3\">\n        <label className=\"col-sm-2\" htmlFor=\"\">\n          Sender:\n        </label>\n        <div className=\"col-sm-10\">\n          <input className=\"form-control\" value={sender} type=\"text\" readOnly />\n        </div>\n      </div>\n      <div className=\"mb-2 row\">\n        <div className=\"col-12\">\n          <textarea\n            value={message}\n            onChange={(e) => setmessage(e.target.value)}\n            className=\"form-control\"\n            name=\"\"\n            rows=\"10\"\n            required\n            placeholder=\"Type here\"\n          ></textarea>\n        </div>\n        {error && <div className=\"text-danger text-center mb-2\">{error}</div>}\n        <div className=\"col-12\">\n          <button\n            disabled={loading}\n            onClick={onSend}\n            className=\"btn blue__btn w-100\"\n          >\n            {loading && (\n              <span\n                className=\"spinner-border spinner-border-sm\"\n                role=\"status\"\n                aria-hidden=\"true\"\n              ></span>\n            )}\n            Send\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nexport default SendToForm;\n"],"sourceRoot":""}