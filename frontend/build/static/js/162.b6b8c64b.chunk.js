(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[162],{1043:function(e,t,s){"use strict";var a=s(0),c=s(637),l=s(27),o=s(10);t.a=function(e){const{register:t,handleSubmit:s,errors:n}=Object(c.a)(),[r,i]=Object(a.useState)([]),[d,j]=Object(a.useState)([]);Object(a.useEffect)((()=>{l.a.get("/classes").then((e=>{console.log(e.data),i(e.data)}))}),[]),Object(a.useEffect)((()=>{l.a.get("/courses").then((e=>{j(e.data)}))}),[]);let{classID:b,setclass:u,subject:h,setsubject:m,topic:O,settopic:p,loading:f,handleAdd:x,handleReset:g,isEdit:v,role:N,setfile:C,notes:S,setnotes:w}=e;return Object(o.jsxs)("form",{className:"row g-3",action:"",children:["admin"===N&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{className:"form-label",children:"Select Class"}),Object(o.jsxs)("select",{value:b,onChange:e=>u(e.target.value),name:"class",className:"form-select",children:[Object(o.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),r.length>0?r.map((e=>Object(o.jsx)("option",{value:e.classCode,children:e.name},e.classCode))):Object(o.jsx)("option",{disabled:!0,children:"No classes available yet"})]})]}),Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{className:"form-label",children:"Select Subject"}),Object(o.jsxs)("select",{value:h,onChange:e=>m(e.target.value),name:"class",className:"form-select",children:[Object(o.jsx)("option",{selected:!0,hidden:!0,children:"Choose..."}),d.length>0?d.map((e=>Object(o.jsx)("option",{value:e.code,children:e.name},e.code))):Object(o.jsx)("option",{disabled:!0,children:"No courses available yet"})]})]})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Topic"}),Object(o.jsx)("input",{value:O,ref:t({required:!0}),onChange:e=>p(e.target.value),type:"text",className:"form-control",name:"topic"}),n.topic&&Object(o.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Notes"}),Object(o.jsx)("textarea",{value:S,onChange:e=>w(e.target.value),rows:5,className:"form-control",id:"topic"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("label",{className:"form-label",children:"Upload file"}),Object(o.jsx)("input",{type:"file",accept:".jpg,.jpeg,.png,.doc,.docx,.pdf, .zip",ref:t({required:!0}),onChange:e=>C(e),className:"form-control",name:"file"}),n.file&&Object(o.jsx)("span",{className:" form-error text-danger mb-2",children:"Please select file"})]}),Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsxs)("button",{onClick:s(x),className:"btn blue__btn mr-3",children:[f&&Object(o.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),v?"Save Changes":"Add"]}),Object(o.jsx)("button",{onClick:s(g),className:"btn orange__btn",children:"Reset"})]})]})}},1352:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s(1043),l=s(27),o=s(16),n=s(614),r=s(10);t.default=function(){const[e,t]=Object(a.useState)(""),[s,i]=Object(a.useState)(""),[d,j]=Object(a.useState)(""),[b,u]=Object(a.useState)(""),[h,m]=Object(a.useState)(""),[O,p]=Object(a.useState)(!1),{id:f}=Object(o.i)(),x=()=>{t(""),i(""),j(""),u(""),m("")};return Object(a.useEffect)((()=>{l.a.get("/notes/".concat(f)).then((e=>{let s=e.data.doc;t(null===s||void 0===s?void 0:s.classID),i(null===s||void 0===s?void 0:s.courseID),j(null===s||void 0===s?void 0:s.topic),m(null===s||void 0===s?void 0:s.file),u(null===s||void 0===s?void 0:s.notes)}))}),[f]),Object(r.jsxs)("div",{className:"content__container mb-5",children:[Object(r.jsx)("h3",{children:"Add New Notes"}),Object(r.jsx)(c.a,{classID:e,setclass:t,subject:s,setsubject:i,topic:d,settopic:j,file:h,handleAdd:()=>{p(!0);(new FormData).append("photo",h),l.a.post("/upload",{dataUrl:h}).then((t=>{const a=t.data.url;console.log(a),l.a.put("/notes/update/".concat(f),{topic:d,classID:e,courseID:s,notes:b,file:a}).then((e=>{if(console.log(e.data),e.data.error)return Object(n.c)(t.data.error),p(!1),0;Object(n.m)("notes successfully added"),p(!1),x()}))})).catch((e=>{p(!1),Object(n.c)("sorry something went error, try again later")}))},handleReset:x,loading:O,isEdit:!0,setfile:async e=>{const t=e.target.files[0];if((null===t||void 0===t?void 0:t.size)>2e6)return Object(n.c)("image is too large");const s=new FileReader;s.readAsDataURL(t),s.onloadend=()=>{m(s.result)}},notes:b,setnotes:u})]})}}}]);
//# sourceMappingURL=162.b6b8c64b.chunk.js.map