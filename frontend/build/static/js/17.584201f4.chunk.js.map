{"version":3,"sources":["AdminComponents/canteen/CanteenForm.js","AdminComponents/canteen/MemberPayments.js","AdminComponents/canteen/AddCanteenPayment.js","AdminComponents/canteen/CanteenNav.js"],"names":["CanteenForm","props","register","handleSubmit","errors","useForm","studentID","setstudentID","planPrice","amount","setamount","handleAdd","loading","_jsxs","action","className","children","_jsx","value","ref","required","onChange","e","target","type","name","userID","map","onClick","readOnly","disabled","role","MemberPayments","_ref","member","planName","user","setuser","useState","useEffect","axios","get","concat","then","res","data","balance","payments","reduce","acc","Number","style","background","Avatar","src","getImgSrc","profileUrl","width","height","getCapitalize","getIntial","middlename","surname","memberID","moment","date","format","scope","covers","currentCurrency","_id","colSpan","AddCanteenPayment","members","setmembers","setmember","setloading","setplanPrice","setplanName","paymentPlan","setpaymentPlan","_res$data","plans","handleSelectuser","id","selectedmember","find","price","plan","paymentMethod","_Fragment","Nav","defaultValue","hidden","length","AddForm","put","error","errorAlert","successAlert","doc","catch","err","console","log","Payments","CanteenNav","NavLink","activeStyle","color","to"],"mappings":"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","file":"static/js/17.584201f4.chunk.js","sourcesContent":["import React from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nfunction CanteenForm(props) {\n  const { register, handleSubmit, errors } = useForm();\n  let {\n    studentID,\n    setstudentID,\n    planPrice,\n    amount,\n    setamount,\n    handleAdd,\n    loading,\n  } = props;\n\n  return (\n    <form action=\"\" className=\"row g-3\">\n      <div className=\"col-md-10\">\n        <label className=\"form-label\">Canteen Member ID</label>\n        <input\n          value={studentID}\n          ref={register({ required: true })}\n          onChange={(e) => setstudentID(e.target.value)}\n          type=\"text\"\n          className=\"form-control\"\n          name=\"userID\"\n        />\n        {errors.userID && (\n          <span className=\" form-error text-danger mb-2\">\n            This field is required\n          </span>\n        )}\n      </div>\n      {planPrice && (\n        <div className=\"col-md-10\">\n          <label className=\"form-label\">Amount Paid</label>\n          {[1, 2, 3].map((e) => (\n            <div className=\"form-check\">\n              <input\n                className=\"form-check-input\"\n                value={planPrice * e}\n                type=\"radio\"\n                //checked={paymentMethod === \"weekly\"}\n                onClick={(e) => setamount(e.target.value)}\n                name=\"flexRadioDefault\"\n              />\n              <label className=\"form-check-label\">{planPrice * e}</label>\n            </div>\n          ))}\n          <input\n            value={amount}\n            ref={register({ required: true })}\n            readOnly\n            type=\"number\"\n            className=\"form-control\"\n            name=\"amount\"\n          />\n          {errors.amount && (\n            <span className=\" form-error text-danger mb-2\">\n              This field is required\n            </span>\n          )}\n        </div>\n      )}\n\n      <div className=\"col-xs-12\">\n        <button\n          disabled={loading}\n          onClick={handleSubmit(handleAdd)}\n          className=\"btn blue__btn\"\n        >\n          {loading && (\n            <span\n              className=\"spinner-border spinner-border-sm\"\n              role=\"status\"\n            ></span>\n          )}\n          Add\n        </button>\n      </div>\n    </form>\n  );\n}\n\nexport default CanteenForm;\n","import React, { useState, useEffect } from \"react\";\nimport { Avatar } from \"@material-ui/core\";\nimport {\n  getImgSrc,\n  getCapitalize,\n  getIntial,\n  currentCurrency,\n} from \"../../utils\";\nimport moment from \"moment\";\nimport axios from \"../../store/axios\";\n\nfunction MemberPayments({ member, planName }) {\n  const [user, setuser] = useState({});\n\n  useEffect(() => {\n    axios.get(`/user/${member?.userID}`).then((res) => {\n      setuser(res.data.user);\n    });\n  }, [member]);\n\n  const balance = member.payments.reduce((acc, e) => {\n    return Number(acc) + Number(e.amount);\n  }, 0);\n\n  return (\n    <div className=\" content__container\">\n      <div\n        style={{ background: \"#051f3e\" }}\n        className=\"d-flex flex-column align-items-center p-3 text-light mb-4\"\n      >\n        <Avatar\n          src={getImgSrc(user?.profileUrl)}\n          style={{ width: \"100px\", height: \"100px\" }}\n        />\n        <h3>\n          {getCapitalize(user?.name)} {getIntial(user?.middlename)}{\" \"}\n          {getCapitalize(user?.surname)} - {user?.userID}\n        </h3>\n\n        <div>\n          <strong>{member?.role} </strong>{\" \"}\n        </div>\n        <div>Canteen Membership ID: {member?.memberID}</div>\n        <hr />\n        <div>\n          <strong>\n            Payment Plan <span className=\"text-danger\">{planName}</span>{\" \"}\n          </strong>{\" \"}\n        </div>\n        <div>Since {moment(member?.date).format(\"D MMMM  YYYY\")} </div>\n      </div>\n      <table className=\"table table-bordered\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Date</th>\n            <th scope=\"col\">Months Covered</th>\n            <th scope=\"col\">Amount</th>\n          </tr>\n        </thead>\n        <tbody>\n          {member?.payments &&\n            member?.payments.map((e) => (\n              <tr key={e._id}>\n                <td>{moment(e?.date).format(\"D MMMM  YYYY\")}</td>\n                <td>{e.covers || \"-\"}</td>\n                <td>\n                  {currentCurrency()}\n                  {e.amount}\n                </td>\n              </tr>\n            ))}\n          <tr>\n            <td colSpan=\"2\">BALANCE</td>\n            <td>\n              {currentCurrency()} {balance}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default MemberPayments;\n","import React, { useState, useEffect } from \"react\";\nimport AddForm from \"./CanteenForm\";\nimport Nav from \"./CanteenNav\";\nimport Payments from \"./MemberPayments\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\n\nfunction AddCanteenPayment() {\n  const [studentID, setstudentID] = useState(\"\");\n  const [members, setmembers] = useState([]);\n  const [member, setmember] = useState({});\n  const [amount, setamount] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [planPrice, setplanPrice] = useState(\"\");\n  const [planName, setplanName] = useState(\"\");\n  const [paymentPlan, setpaymentPlan] = useState([]);\n\n  useEffect(() => {\n    axios.get(\"/canteen\").then((res) => {\n      setmembers(res.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    axios.get(\"/paymentplan\").then((res) => {\n      ///console.log(res.data);\n      setpaymentPlan(res.data?.plans);\n    });\n  }, []);\n\n  const handleSelectuser = (id) => {\n    let selectedmember = members.find((e) => e.memberID === id);\n    setmember(selectedmember);\n    let price = paymentPlan.find(\n      (e) => e.plan === selectedmember?.paymentMethod\n    );\n    setplanPrice(price?.price);\n    setplanName(price?.name);\n    setstudentID(id);\n  };\n\n  const handleAdd = () => {\n    setloading(true);\n    axios\n      .put(`/canteen/payment/${studentID}`, {\n        amount,\n        covers: amount / planPrice,\n      })\n      .then((res) => {\n        setloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n        }\n        successAlert(\"Payment succefully recorded\");\n        setamount(\"\");\n        setmember(res.data.doc);\n      })\n      .catch((err) => {\n        errorAlert(\"Payment Failed\");\n        console.log(err);\n        setloading(false);\n      });\n  };\n\n  return (\n    <>\n      <Nav />\n      <h3>Add Canteen Payment </h3>\n      <div className=\"mb-5 row\">\n        <div className=\"col-sm-6  content__container\">\n          <div className=\"mb-5\">\n            <label className=\"form-label\"> Select Canteen Member</label>\n            <select\n              onChange={(e) => handleSelectuser(e.target.value)}\n              className=\"form-select\"\n            >\n              <option defaultValue hidden>\n                Choose...\n              </option>\n              {members?.length > 0 ? (\n                members?.map((e) => (\n                  <option key={e.memberID} value={e.memberID}>\n                    {e.name} {e.memberID}\n                  </option>\n                ))\n              ) : (\n                <option disabled>No members yet</option>\n              )}\n            </select>\n          </div>\n          <AddForm\n            studentID={studentID}\n            setstudentID={handleSelectuser}\n            handleAdd={handleAdd}\n            loading={loading}\n            planPrice={planPrice}\n            amount={amount}\n            setamount={setamount}\n          />\n        </div>\n        <div className=\"col-sm-6\">\n          {planPrice && <Payments planName={planName} member={member} />}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default AddCanteenPayment;\n","import React from 'react'\nimport {NavLink} from 'react-router-dom'\n\nfunction CanteenNav() {\n    return (\n        <div className=\"d-flex xs-flex-column sm-flex-row justify-content-end\">\n            <NavLink  activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/members/register\">Add  Canteen Member </NavLink>\n            <NavLink activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/members\">All Members</NavLink>\n            <NavLink activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/payments/plan\">Payments Plan</NavLink>\n            <NavLink activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/payments/add\">Make Payment</NavLink>\n            <NavLink activeStyle={{ color: '#ffa201' }} className=\"btn\" to=\"/canteen/payments\">All Payments</NavLink>\n            \n        </div>\n    )\n}\n\nexport default CanteenNav\n"],"sourceRoot":""}