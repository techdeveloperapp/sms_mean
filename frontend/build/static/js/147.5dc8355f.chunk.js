(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[147],{1215:function(e,t,s){"use strict";var a=s(0),c=s(637),l=s(27),n=s(84),r=s(26),d=s(935),i=s.n(d),o=s(1216),j=s.n(o),b=s(1304),u=s(10);t.a=function(e){const[t,s]=Object(a.useState)([]),d=Object(n.c)(r.e),o=Object(n.c)(r.c);let{type:h,teacher:m,setteacher:O,settype:v,name:p,setname:x,code:f,setcode:g,onSubmit:N,loading:y,isEdit:C,setclassesArr:S,classesArr:_}=e;console.log(_),Object(a.useEffect)((()=>{l.a.get("/teachers/teachers").then((e=>{s(e.data)}))}),[]);const{register:A,handleSubmit:D,errors:E}=Object(c.a)();return Object(u.jsxs)("form",{action:"",onSubmit:D(N),children:[Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("label",{className:"form-label",children:"Course Name"}),Object(u.jsx)("input",{type:"text",value:p,ref:A({required:!0}),onChange:e=>x(e.target.value),className:"form-control",name:"name"}),E.name&&Object(u.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]}),!C&&Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("label",{className:"form-label",children:"Course Code"}),Object(u.jsx)("input",{type:"text",value:f,ref:A({required:!0}),onChange:e=>g(e.target.value),className:"form-control",name:"code"}),E.code&&Object(u.jsx)("span",{className:"form-error text-danger mb-2",children:"This field is required"})]}),Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("label",{className:"form-label",children:"Departments"}),Object(u.jsxs)("select",{name:"type",value:h,onChange:e=>v(e.target.value),id:"inputState",className:"form-select",children:[Object(u.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),d.length>0?d.map((e=>Object(u.jsx)("option",{value:e.code,children:e.name},e._id))):Object(u.jsx)("option",{disabled:!0,children:"No departments yet"})]})]}),Object(u.jsxs)("div",{className:"mb-3",children:[Object(u.jsx)("div",{className:"d-flex justify-content-between mb-3",children:Object(u.jsx)("label",{className:"form-label",children:"Classes"})}),Object(u.jsx)("div",{className:"mb-3",children:_&&_.map((e=>Object(u.jsxs)("div",{className:" row",children:[Object(u.jsx)("div",{className:"col-sm-5 mb-3",children:Object(u.jsxs)("select",{name:"type",value:e.class,onChange:t=>{return s=t.target.value,a=e._id,void S(_.map((e=>e._id===a?{_id:a,class:s,teacher:e.teacher}:e)));var s,a},id:"inputState",className:"form-select",children:[Object(u.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),o.length>0?o.map((e=>Object(u.jsx)("option",{value:e.classCode,children:e.name},e._id))):Object(u.jsx)("option",{disabled:!0,children:"No classes yet yet"})]})}),Object(u.jsx)("div",{className:"col-sm-5",children:Object(u.jsxs)("select",{name:"type",value:e.teacher,onChange:t=>{return s=t.target.value,a=e._id,void S(_.map((e=>e._id===a?{_id:a,class:e.class,teacher:s}:e)));var s,a},id:"inputState",className:"form-select",children:[Object(u.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),t.length>0?t.map((e=>Object(u.jsxs)("option",{value:e.userID,children:[e.name," ",""," ",e.surname]},e._id))):Object(u.jsx)("option",{disabled:!0,children:"No teachers registered yet"})]})}),Object(u.jsx)("div",{className:"col-sm-2",children:Object(u.jsx)(b.a,{onClick:()=>(e=>{let t=_.filter((t=>t._id!==e));console.log(t),S(t)})(e._id),children:Object(u.jsx)(i.a,{})})})]},e._id)))}),Object(u.jsx)("div",{className:"d-flex justify-content-start",children:Object(u.jsxs)("button",{type:"button",onClick:()=>{let e=Math.random().toString(16).slice(2);S([..._,{class:"",teacher:"",_id:e}])},className:"btn ",children:[Object(u.jsx)(j.a,{}),"Add Class"," "]})})]}),Object(u.jsxs)("div",{className:"mb-5",children:[Object(u.jsx)("label",{className:"form-label",children:"Head Teacher"}),Object(u.jsxs)("select",{name:"type",value:m,onChange:e=>O(e.target.value),id:"inputState",className:"form-select",children:[Object(u.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),t.length>0?t.map((e=>Object(u.jsxs)("option",{value:null===e||void 0===e?void 0:e.userID,children:[e.name," ",e.surname]},null===e||void 0===e?void 0:e.userID))):Object(u.jsx)("option",{disabled:!0,children:"No data"})]})]}),Object(u.jsx)("div",{className:"mb-3",children:Object(u.jsxs)("button",{disabled:y,type:"submit",className:"btn blue__btn",children:[y&&Object(u.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),C?"Save Changes":"Add"]})})]})}},1216:function(e,t,s){"use strict";var a=s(609),c=s(611);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=c(s(0)),n=(0,a(s(610)).default)(l.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutline");t.default=n},1350:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s(1215),l=s(27),n=s(16),r=s(614),d=s(10);t.default=function(){const[e,t]=Object(a.useState)(""),[s,i]=Object(a.useState)(""),[o,j]=Object(a.useState)(""),[b,u]=Object(a.useState)(""),[h,m]=Object(a.useState)(""),[O,v]=Object(a.useState)(""),{id:p}=Object(n.i)(),[x,f]=Object(a.useState)([]);return Object(a.useEffect)((()=>{l.a.get("/courses/".concat(p)).then((e=>{if(console.log(e.data),e.data.error)return Object(r.c)(e.data.error),0;const{docs:s}=e.data;v(null===s||void 0===s?void 0:s.classID),t(null===s||void 0===s?void 0:s.name),u(null===s||void 0===s?void 0:s.type),m(null===s||void 0===s?void 0:s.teacher),i(null===s||void 0===s?void 0:s.code),f(null===s||void 0===s?void 0:s.classes)}))}),[p]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"content__container",children:[Object(d.jsx)("h3",{className:"mb-4",children:"Edit Course"}),Object(d.jsx)(c.a,{type:b,settype:u,setteacher:m,teacher:h,onSubmit:()=>{j(!0);let t=x.filter((e=>""!==e.class||""!==e.teacher)),a=(e=>{let t=[];return e.map((e=>{t.find((t=>t.class===e.class&&t.teacher===e.teacher))||t.push(e)})),t})(t);console.log(t),l.a.put("/courses/update/".concat(p),{name:e,code:s,type:b,teacher:h,classID:O,classes:a}).then((e=>{if(e.data.error)return Object(r.c)(e.data.error),0;Object(r.m)("successfully edited"),j(!1),console.log(a)})).catch((()=>{Object(r.c)("Something went wrong"),j(!1)}))},name:e,handleSetclasses:e=>{v(e),f([...x,e])},loading:o,setname:t,classID:O,classesArr:x,setclassesArr:f,code:s,isEdit:!0,setcode:i})]})})}},935:function(e,t,s){"use strict";var a=s(609),c=s(611);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=c(s(0)),n=(0,a(s(610)).default)(l.createElement("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"HighlightOff");t.default=n}}]);
//# sourceMappingURL=147.5dc8355f.chunk.js.map