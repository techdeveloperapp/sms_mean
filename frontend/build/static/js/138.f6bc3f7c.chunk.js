(this["webpackJsonpschool-dashoboard"]=this["webpackJsonpschool-dashoboard"]||[]).push([[138],{1019:function(e,a,c){"use strict";c.d(a,"b",(function(){return l}));var t=c(0),s=t.createContext();function l(){return t.useContext(s)}a.a=s},1214:function(e,a,c){"use strict";var t=c(0),s=c(637),l=c(84),o=c(27),n=c(26),r=c(974),i=c(10);a.a=function(e){const a=Object(l.c)(n.b),c=Object(l.c)(n.f),d=Object(l.c)(n.h),[m,b]=Object(t.useState)([]),h=Object(l.c)(n.m),{register:u,handleSubmit:j,errors:p}=Object(s.a)();let{name:O,setname:f,code:v,setcode:x,campus:g,academic:N,setacademic:C,division:y,setdivision:k,group:S,setgroup:w,prefect:I,setprefect:F,sba:z,setsba:B,sbaStaff:E,setsbaStaff:V,setcampus:_,teacher:P,loading:q,isEdit:A,handleAddClass:D,setteacher:H}=e;const[M,R]=Object(t.useState)([]);return Object(t.useEffect)((()=>{o.a.get("/prefects").then((e=>{R(e.data)}))}),[]),Object(t.useEffect)((()=>{o.a.get("/teachers/teachers").then((e=>{b(e.data)}))}),[]),Object(i.jsxs)("form",{onSubmit:j(D),action:"",children:[Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Academic Year"}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsxs)("select",{name:"academic-calendar",className:"form-select",value:N,onChange:e=>C(e.target.value),children:[Object(i.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),h.length>0?h.map((e=>Object(i.jsx)("option",{value:e.year,children:e.year},e.year))):Object(i.jsx)("option",{disabled:!0,children:"No data"})]})})]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Class Name"}),Object(i.jsxs)("div",{className:"col-sm-10",children:[Object(i.jsx)("input",{value:O,onChange:e=>f(e.target.value),type:"text",ref:u({required:!0}),className:"form-control",name:"name"}),p.name&&Object(i.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),!A&&Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Class Code"}),Object(i.jsxs)("div",{className:"col-sm-10",children:[Object(i.jsx)("input",{ref:u({required:!0}),value:v,onChange:e=>x(e.target.value),type:"text",className:"form-control",name:"code"}),p.code&&Object(i.jsx)("span",{className:" form-error text-danger mb-2",children:"This field is required"})]})]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Campus"}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsxs)("select",{id:"campus",className:"form-select",value:g,onChange:e=>_(e.target.value),children:[Object(i.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),a.length>0?a.map((e=>Object(i.jsx)("option",{value:e._id,children:e.name},e._id))):Object(i.jsx)("option",{disabled:!0,children:"No campuses yet"})]})})]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Group"}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsxs)("select",{id:"campus",className:"form-select",value:S,onChange:e=>w(e.target.value),children:[Object(i.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),d.length>0?d.map((e=>Object(i.jsx)("option",{value:e._id,children:e.name},e._id))):Object(i.jsx)("option",{disabled:!0,children:"No groups yet"})]})})]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Division"}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsxs)("select",{id:"campus",className:"form-select",value:y,onChange:e=>k(e.target.value),children:[Object(i.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),c.length>0?c.map((e=>Object(i.jsx)("option",{value:e.code,children:e.name},e._id))):Object(i.jsx)("option",{disabled:!0,children:"No divisions yet"})]})})]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Class Teacher"}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsxs)("select",{value:P,onChange:e=>H(e.target.value),id:"teacher",className:"form-select",children:[Object(i.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),m.length>0?m.map((e=>Object(i.jsxs)("option",{value:e.userID,children:[e.name," ",e.surname]},e.userID))):Object(i.jsx)("option",{disabled:!0,children:"No staff yet"})]})})]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"Class Prefect"}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsxs)("select",{id:"campus",className:"form-select",value:I,onChange:e=>F(e.target.value),children:[Object(i.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),(null===M||void 0===M?void 0:M.length)>0?M.map((e=>Object(i.jsx)("option",{value:null===e||void 0===e?void 0:e.userID,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id))):Object(i.jsx)("option",{disabled:!0,children:"No prefects yet"})]})})]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"SBA Configuration"}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsx)(r.a,{checked:z,color:"primary",onChange:()=>B(!z),inputProps:{"aria-label":"primary checkbox"}})})]}),Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"SBA Assign Staff"}),Object(i.jsx)("div",{className:"col-sm-10",children:Object(i.jsxs)("select",{id:"campus",className:"form-select",value:E,onChange:e=>V(e.target.value),children:[Object(i.jsx)("option",{defaultValue:!0,hidden:!0,children:"Choose..."}),m.length>0?m.map((e=>Object(i.jsxs)("option",{value:e.userID,children:[e.name," ",e.surname]},e.userID))):Object(i.jsx)("option",{disabled:!0,children:"No staff yet"})]})})]}),Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"offset-sm-2",children:Object(i.jsxs)("button",{disabled:q,type:"submit",className:"btn blue__btn",children:[q&&Object(i.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),A?"Save Changes":"Add"]})})})]})}},1346:function(e,a,c){"use strict";c.r(a);var t=c(0),s=c(1214),l=c(27),o=c(614),n=c(84),r=c(26),i=c(10);a.default=function(){const[e,a]=Object(t.useState)(""),[c,d]=Object(t.useState)(""),[m,b]=Object(t.useState)(""),[h,u]=Object(t.useState)(""),[j,p]=Object(t.useState)(!1),[O,f]=Object(t.useState)(""),v=Object(n.b)(),x=Object(n.c)(r.c),[g,N]=Object(t.useState)(""),[C,y]=Object(t.useState)(""),[k,S]=Object(t.useState)(""),[w,I]=Object(t.useState)(!1),[F,z]=Object(t.useState)("");return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"content__container",children:[Object(i.jsx)("h3",{children:"Add Class"}),Object(i.jsx)(s.a,{name:e,setname:a,campus:c,setcampus:d,code:h,academic:O,setacademic:f,loading:j,setcode:u,teacher:m,handleAddClass:()=>{p(!0),l.a.post("/classes/create",{classCode:h,name:e,campusID:c,teacherID:m,academic:O,prefect:k,division:g,sba:w,group:C,sbaStaff:F}).then((async c=>{var t;let{data:s}=c;if(p(!1),null!==s&&void 0!==s&&s.error)return Object(o.c)(s.error),0;Object(o.m)("".concat(null===(t=s.doc)||void 0===t?void 0:t.classCode," is successfully added")),p(!1),v(Object(r.q)([s.doc,...x])),await l.a.post("/activitylog/create",{activity:" ".concat(e," class was created"),user:"admin"}),await l.a.post("/fees/create",{name:e,code:e.toLowerCase()}),d(""),u(""),a(""),f(""),b(""),y(""),N("")})).catch((e=>{console.log(e),Object(o.c)("something when wrong"),p(!1)}))},setteacher:b,setdivision:N,division:g,setgroup:y,group:C,setprefect:S,prefects:k,sba:w,setsba:I,sbaStaff:F,setsbaStaff:z})]})})}},815:function(e,a,c){"use strict";c.d(a,"a",(function(){return l}));var t=c(0),s=c(1019);function l(){return t.useContext(s.a)}},974:function(e,a,c){"use strict";var t=c(1),s=c(14),l=c(0),o=c(30),n=c(99),r=c(685),i=c(815),d=c(97),m=c(1304),b=l.forwardRef((function(e,a){var c=e.autoFocus,d=e.checked,b=e.checkedIcon,h=e.classes,u=e.className,j=e.defaultChecked,p=e.disabled,O=e.icon,f=e.id,v=e.inputProps,x=e.inputRef,g=e.name,N=e.onBlur,C=e.onChange,y=e.onFocus,k=e.readOnly,S=e.required,w=e.tabIndex,I=e.type,F=e.value,z=Object(s.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),B=Object(r.a)({controlled:d,default:Boolean(j),name:"SwitchBase",state:"checked"}),E=Object(n.a)(B,2),V=E[0],_=E[1],P=Object(i.a)(),q=p;P&&"undefined"===typeof q&&(q=P.disabled);var A="checkbox"===I||"radio"===I;return l.createElement(m.a,Object(t.a)({component:"span",className:Object(o.a)(h.root,u,V&&h.checked,q&&h.disabled),disabled:q,tabIndex:null,role:void 0,onFocus:function(e){y&&y(e),P&&P.onFocus&&P.onFocus(e)},onBlur:function(e){N&&N(e),P&&P.onBlur&&P.onBlur(e)},ref:a},z),l.createElement("input",Object(t.a)({autoFocus:c,checked:d,defaultChecked:j,className:h.input,disabled:q,id:A&&f,name:g,onChange:function(e){var a=e.target.checked;_(a),C&&C(e,a)},readOnly:k,ref:x,required:S,tabIndex:w,type:I,value:F},v)),V?b:O)})),h=Object(d.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(b),u=c(657),j=Object(u.a)(l.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=Object(u.a)(l.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),O=c(98),f=Object(u.a)(l.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),v=c(158),x=l.createElement(p,null),g=l.createElement(j,null),N=l.createElement(f,null),C=l.forwardRef((function(e,a){var c=e.checkedIcon,n=void 0===c?x:c,r=e.classes,i=e.color,d=void 0===i?"secondary":i,m=e.icon,b=void 0===m?g:m,u=e.indeterminate,j=void 0!==u&&u,p=e.indeterminateIcon,O=void 0===p?N:p,f=e.inputProps,C=e.size,y=void 0===C?"medium":C,k=Object(s.a)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),S=j?O:b,w=j?O:n;return l.createElement(h,Object(t.a)({type:"checkbox",classes:{root:Object(o.a)(r.root,r["color".concat(Object(v.a)(d))],j&&r.indeterminate),checked:r.checked,disabled:r.disabled},color:d,inputProps:Object(t.a)({"data-indeterminate":j},f),icon:l.cloneElement(S,{fontSize:void 0===S.props.fontSize&&"small"===y?y:S.props.fontSize}),checkedIcon:l.cloneElement(w,{fontSize:void 0===w.props.fontSize&&"small"===y?y:w.props.fontSize}),ref:a},k))}));a.a=Object(d.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(O.a)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(O.a)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(C)}}]);
//# sourceMappingURL=138.f6bc3f7c.chunk.js.map